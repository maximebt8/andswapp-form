<!doctype html>
<html lang="fr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cr√©er mon profil &amp;SWAPP</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f8fafc 100%);
            min-height: 100%;
        }
        
        html, body {
            height: 100%;
        }
        
        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .step-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(46, 89, 65, 0.1);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .step-header {
            background: linear-gradient(135deg, #2E5941 0%, #3a6b4f 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .step-content {
            padding: 2rem;
        }
        
        .input-field {
            background: white;
            border: 2px solid #f3f4f6;
            border-radius: 12px;
            padding: 1rem;
            transition: all 0.3s ease;
            font-size: 16px;
            width: 100%;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #2E5941;
            box-shadow: 0 0 0 4px rgba(46, 89, 65, 0.1);
        }
        
        .input-field.error {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        
        .btn-primary {
            background: #FFCC00;
            color: #2E5941;
            border: none;
            border-radius: 12px;
            padding: 1rem 2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            font-size: 16px;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #e6b800;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 204, 0, 0.4);
        }
        
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: white;
            color: #2E5941;
            border: 2px solid #A5C1AA;
            border-radius: 12px;
            padding: 1rem 2rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .btn-secondary:hover {
            border-color: #2E5941;
            background: #f0f9f2;
            transform: translateY(-1px);
        }
        
        .btn-ai {
            background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.25rem 0.5rem;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            opacity: 0.8;
        }
        
        .btn-ai:hover {
            background: linear-gradient(135deg, #7C3AED 0%, #9333EA 100%);
            opacity: 1;
            transform: translateY(-1px);
        }
        
        .btn-ai:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #FFCC00 0%, #ffd700 100%);
            height: 100%;
            transition: width 0.5s ease;
        }
        
        .required::after {
            content: ' *';
            color: #ef4444;
        }
        
        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .selection-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .selection-card:hover {
            border-color: #d1d5db;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }
        
        .selection-card.selected {
            border-color: #2E5941;
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
            box-shadow: 0 8px 25px rgba(46, 89, 65, 0.12);
            transform: translateY(-2px);
        }
        
        .selection-card.selected::after {
            content: '‚úì';
            position: absolute;
            top: 16px;
            right: 16px;
            background: #2E5941;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .textarea-field {
            background: white;
            border: 2px solid #f3f4f6;
            border-radius: 12px;
            padding: 1rem;
            transition: all 0.3s ease;
            font-size: 16px;
            width: 100%;
            min-height: 120px;
            resize: vertical;
        }
        
        .textarea-field:focus {
            outline: none;
            border-color: #2E5941;
            box-shadow: 0 0 0 4px rgba(46, 89, 65, 0.1);
        }
        
        .textarea-field.error {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 24px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .emoji-large {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .flexible-option {
            transition: all 0.3s ease;
        }
        
        .flexible-option.selected {
            border-color: #2E5941;
            background: #f0fdf4;
        }

        .date-range {
            position: relative;
        }

        .remove-date-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-date-btn:hover {
            background: #dc2626;
        }

        .ai-suggestion {
            background: linear-gradient(135deg, #f3e8ff 0%, #faf5ff 100%);
            border: 2px solid #e9d5ff;
            border-radius: 12px;
            padding: 1rem;
            margin-top: 0.5rem;
            display: none;
        }

        .ai-suggestion.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-suggestion h4 {
            color: #7c3aed;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-suggestion p {
            color: #6b46c1;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .ai-suggestion button {
            background: #8b5cf6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            transition: background 0.2s;
        }

        .ai-suggestion button:hover {
            background: #7c3aed;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .character-count {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: right;
            margin-top: 0.25rem;
        }

        .character-count.warning {
            color: #f59e0b;
        }

        .character-count.error {
            color: #ef4444;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #374151;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .field-with-ai {
            position: relative;
        }

        .ai-button-container {
            position: absolute;
            top: 4px;
            right: 4px;
            z-index: 10;
        }

        .smart-suggestions {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 0.75rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
        }

        .smart-suggestions h5 {
            color: #0369a1;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .smart-suggestions ul {
            color: #0c4a6e;
            margin-left: 1rem;
        }

        .smart-suggestions li {
            margin-bottom: 0.25rem;
        }
   /* ‚Äî‚Äî‚Äî CTA d'aide discrets sur l'√©tape 3 ‚Äî‚Äî‚Äî */
#step-3 .btn-ai,
#step-3 .btn-secondary[onclick*="openDestinationModal"],
#step-3 .btn-secondary[onclick*="openDestination"], 
#step-3 .btn-secondary[title*="Surprends-moi"] {
  font-size: 12px !important;
  padding: .35rem .6rem !important;
  border-radius: 9999px !important;
  line-height: 1 !important;
  border-width: 1px !important;
  box-shadow: none !important;
}

    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body>
  <div class="min-h-full"><!-- Header -->
   <div class="bg-white border-b border-gray-100 sticky top-0 z-40">
    <div class="form-container py-4 px-4">
     <div class="flex items-center justify-between">
      <div class="flex items-center">
       <div class="text-2xl font-bold text-green-800">
        &amp;SWAPP
       </div>
       <div class="ml-4 text-gray-600"><span class="text-sm">‚ú® Cr√©ation de profil</span>
       </div>
      </div>
      <div class="text-sm text-gray-500">
       √âtape <span id="current-step">1</span> sur 4
      </div>
     </div>
    </div>
   </div>
   <div class="form-container py-8 px-4"><!-- Progress Bar -->
    <div class="mb-8">
     <div class="progress-bar">
      <div class="progress-fill" id="progress-fill" style="width: 25%"></div>
     </div>
    </div><!-- √âtape 1: Info appartement -->
    <div class="step-card" id="step-1">
     <div class="step-header">
      <div class="emoji-large">
       üè°
      </div>
      <h2 class="text-2xl font-bold mb-2">Info sur mon appartement</h2>
      <p class="text-green-100">Pr√©sentez votre logement aux futurs swappers</p>
     </div>
     <div class="step-content">
      <div class="space-y-6"><!-- Localisation -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üìç Localisation</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div><label for="country" class="block text-sm font-medium text-gray-700 mb-2 required">Pays</label> <select id="country" class="input-field" required> <option value="">S√©lectionner un pays</option> <option value="FR">France</option> <option value="ES">Espagne</option> <option value="IT">Italie</option> <option value="DE">Allemagne</option> <option value="UK">Royaume-Uni</option> <option value="US">√âtats-Unis</option> <option value="CA">Canada</option> <option value="PT">Portugal</option> <option value="NL">Pays-Bas</option> <option value="BE">Belgique</option> <option value="CH">Suisse</option> <option value="AT">Autriche</option> <option value="SE">Su√®de</option> <option value="NO">Norv√®ge</option> <option value="DK">Danemark</option> <option value="FI">Finlande</option> <option value="IE">Irlande</option> <option value="GR">Gr√®ce</option> <option value="CZ">R√©publique tch√®que</option> <option value="PL">Pologne</option> <option value="HU">Hongrie</option> <option value="HR">Croatie</option> <option value="SI">Slov√©nie</option> <option value="SK">Slovaquie</option> <option value="RO">Roumanie</option> <option value="BG">Bulgarie</option> <option value="LT">Lituanie</option> <option value="LV">Lettonie</option> <option value="EE">Estonie</option> <option value="MT">Malte</option> <option value="CY">Chypre</option> <option value="LU">Luxembourg</option> <option value="IS">Islande</option> <option value="LI">Liechtenstein</option> <option value="MC">Monaco</option> <option value="SM">Saint-Marin</option> <option value="VA">Vatican</option> <option value="AD">Andorre</option> <option value="AU">Australie</option> <option value="NZ">Nouvelle-Z√©lande</option> <option value="JP">Japon</option> <option value="KR">Cor√©e du Sud</option> <option value="SG">Singapour</option> <option value="HK">Hong Kong</option> <option value="TW">Ta√Øwan</option> <option value="MY">Malaisie</option> <option value="TH">Tha√Ølande</option> <option value="VN">Vietnam</option> <option value="PH">Philippines</option> <option value="ID">Indon√©sie</option> <option value="IN">Inde</option> <option value="CN">Chine</option> <option value="MX">Mexique</option> <option value="BR">Br√©sil</option> <option value="AR">Argentine</option> <option value="CL">Chili</option> <option value="CO">Colombie</option> <option value="PE">P√©rou</option> <option value="UY">Uruguay</option> <option value="PY">Paraguay</option> <option value="BO">Bolivie</option> <option value="EC">√âquateur</option> <option value="VE">Venezuela</option> <option value="GY">Guyana</option> <option value="SR">Suriname</option> <option value="GF">Guyane fran√ßaise</option> <option value="ZA">Afrique du Sud</option> <option value="MA">Maroc</option> <option value="TN">Tunisie</option> <option value="DZ">Alg√©rie</option> <option value="EG">√âgypte</option> <option value="KE">Kenya</option> <option value="TZ">Tanzanie</option> <option value="UG">Ouganda</option> <option value="RW">Rwanda</option> <option value="ET">√âthiopie</option> <option value="GH">Ghana</option> <option value="NG">Nigeria</option> <option value="SN">S√©n√©gal</option> <option value="CI">C√¥te d'Ivoire</option> <option value="ML">Mali</option> <option value="BF">Burkina Faso</option> <option value="NE">Niger</option> <option value="TD">Tchad</option> <option value="CM">Cameroun</option> <option value="CF">R√©publique centrafricaine</option> <option value="GA">Gabon</option> <option value="CG">R√©publique du Congo</option> <option value="CD">R√©publique d√©mocratique du Congo</option> <option value="AO">Angola</option> <option value="ZM">Zambie</option> <option value="ZW">Zimbabwe</option> <option value="BW">Botswana</option> <option value="NA">Namibie</option> <option value="SZ">Eswatini</option> <option value="LS">Lesotho</option> <option value="MG">Madagascar</option> <option value="MU">Maurice</option> <option value="SC">Seychelles</option> <option value="KM">Comores</option> <option value="DJ">Djibouti</option> <option value="SO">Somalie</option> <option value="ER">√ârythr√©e</option> <option value="SD">Soudan</option> <option value="SS">Soudan du Sud</option> <option value="LY">Libye</option> <option value="MR">Mauritanie</option> <option value="GM">Gambie</option> <option value="GW">Guin√©e-Bissau</option> <option value="GN">Guin√©e</option> <option value="SL">Sierra Leone</option> <option value="LR">Liberia</option> <option value="TG">Togo</option> <option value="BJ">B√©nin</option> <option value="CV">Cap-Vert</option> <option value="ST">Sao Tom√©-et-Principe</option> <option value="GQ">Guin√©e √©quatoriale</option> <option value="IL">Isra√´l</option> <option value="PS">Palestine</option> <option value="JO">Jordanie</option> <option value="LB">Liban</option> <option value="SY">Syrie</option> <option value="IQ">Irak</option> <option value="IR">Iran</option> <option value="AF">Afghanistan</option> <option value="PK">Pakistan</option> <option value="BD">Bangladesh</option> <option value="LK">Sri Lanka</option> <option value="MV">Maldives</option> <option value="BT">Bhoutan</option> <option value="NP">N√©pal</option> <option value="MM">Myanmar</option> <option value="LA">Laos</option> <option value="KH">Cambodge</option> <option value="BN">Brunei</option> <option value="TL">Timor oriental</option> <option value="PG">Papouasie-Nouvelle-Guin√©e</option> <option value="SB">√éles Salomon</option> <option value="VU">Vanuatu</option> <option value="FJ">Fidji</option> <option value="NC">Nouvelle-Cal√©donie</option> <option value="PF">Polyn√©sie fran√ßaise</option> <option value="WF">Wallis-et-Futuna</option> <option value="TO">Tonga</option> <option value="WS">Samoa</option> <option value="KI">Kiribati</option> <option value="TV">Tuvalu</option> <option value="NR">Nauru</option> <option value="PW">Palaos</option> <option value="FM">√âtats f√©d√©r√©s de Micron√©sie</option> <option value="MH">√éles Marshall</option> <option value="CK">√éles Cook</option> <option value="NU">Niue</option> <option value="TK">Tokelau</option> <option value="AS">Samoa am√©ricaines</option> <option value="GU">Guam</option> <option value="MP">√éles Mariannes du Nord</option> <option value="VI">√éles Vierges am√©ricaines</option> <option value="PR">Porto Rico</option> <option value="DO">R√©publique dominicaine</option> <option value="HT">Ha√Øti</option> <option value="JM">Jama√Øque</option> <option value="CU">Cuba</option> <option value="BS">Bahamas</option> <option value="BB">Barbade</option> <option value="TT">Trinit√©-et-Tobago</option> <option value="GD">Grenade</option> <option value="VC">Saint-Vincent-et-les-Grenadines</option> <option value="LC">Sainte-Lucie</option> <option value="DM">Dominique</option> <option value="AG">Antigua-et-Barbuda</option> <option value="KN">Saint-Kitts-et-Nevis</option> <option value="AI">Anguilla</option> <option value="MS">Montserrat</option> <option value="VG">√éles Vierges britanniques</option> <option value="TC">√éles Turques-et-Ca√Øques</option> <option value="KY">√éles Ca√Ømans</option> <option value="BM">Bermudes</option> <option value="GL">Groenland</option> <option value="FO">√éles F√©ro√©</option> <option value="SJ">Svalbard et Jan Mayen</option> <option value="AX">√éles √Öland</option> <option value="GI">Gibraltar</option> <option value="JE">Jersey</option> <option value="GG">Guernesey</option> <option value="IM">√éle de Man</option> <option value="FK">√éles Malouines</option> <option value="GS">G√©orgie du Sud-et-les √éles Sandwich du Sud</option> <option value="SH">Sainte-H√©l√®ne, Ascension et Tristan da Cunha</option> <option value="IO">Territoire britannique de l'oc√©an Indien</option> <option value="TF">Terres australes et antarctiques fran√ßaises</option> <option value="HM">√éles Heard-et-MacDonald</option> <option value="CC">√éles Cocos</option> <option value="CX">√éle Christmas</option> <option value="NF">√éle Norfolk</option> <option value="PN">√éles Pitcairn</option> <option value="RE">La R√©union</option> <option value="YT">Mayotte</option> <option value="GP">Guadeloupe</option> <option value="MQ">Martinique</option> <option value="BL">Saint-Barth√©lemy</option> <option value="MF">Saint-Martin</option> <option value="PM">Saint-Pierre-et-Miquelon</option> <option value="AQ">Antarctique</option> <option value="BV">√éle Bouvet</option> <option value="EH">Sahara occidental</option> <option value="UM">√éles mineures √©loign√©es des √âtats-Unis</option> </select>
          <div class="error-message" id="country-error">
           Veuillez s√©lectionner un pays
          </div>
         </div>
         <div><label for="city" class="block text-sm font-medium text-gray-700 mb-2 required">Ville</label> <input type="text" id="city" class="input-field" placeholder="Ex: Paris, Lyon, Marseille..." required>
          <div class="error-message" id="city-error">
           Veuillez saisir votre ville
          </div>
         </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
         <div><label for="region" class="block text-sm font-medium text-gray-700 mb-2 required">R√©gion</label> <input type="text" id="region" class="input-field" placeholder="Ex: √éle-de-France, Californie..." required>
          <div class="error-message" id="region-error">
           Veuillez saisir votre r√©gion
          </div>
         </div>
         <div><label for="postal-code" class="block text-sm font-medium text-gray-700 mb-2 required">Code postal</label> <input type="text" id="postal-code" class="input-field" placeholder="Ex: 75001" required>
          <div class="error-message" id="postal-code-error">
           Veuillez saisir votre code postal
          </div>
         </div>
        </div>
       </div><!-- Caract√©ristiques du logement -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üè† Caract√©ristiques du logement</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div><label class="block text-sm font-medium text-gray-700 mb-2 required">Type de logement</label> <select id="housing-type" class="input-field" required> <option value="">S√©lectionner</option> <option value="apartment">Appartement</option> <option value="house">Maison</option> <option value="room">Chambre</option> <option value="shared">Colocation compl√®te</option> </select>
          <div class="error-message" id="housing-type-error">
           Veuillez s√©lectionner le type de logement
          </div>
         </div>
         <div><label for="surface" class="block text-sm font-medium text-gray-700 mb-2 required">Superficie (m¬≤)</label> <input type="number" id="surface" class="input-field" placeholder="Ex: 65" min="10" max="500" required>
          <div class="error-message" id="surface-error">
           Veuillez saisir la superficie
          </div>
         </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
         <div><label class="block text-sm font-medium text-gray-700 mb-2 required">Nombre de chambres</label> <select id="bedrooms" class="input-field" required> <option value="">S√©lectionner</option> <option value="0">Studio</option> <option value="1">1 chambre</option> <option value="2">2 chambres</option> <option value="3">3 chambres</option> <option value="4">4 chambres</option> <option value="5+">5+ chambres</option> </select>
          <div class="error-message" id="bedrooms-error">
           Veuillez s√©lectionner le nombre de chambres
          </div>
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-2 required">Nombre de couchages</label> <select id="sleeping-spots" class="input-field" required> <option value="">S√©lectionner</option> <option value="1">1 personne</option> <option value="2">2 personnes</option> <option value="4">4 personnes</option> <option value="6">6 personnes</option> <option value="8+">8+ personnes</option> </select>
          <div class="error-message" id="sleeping-spots-error">
           Veuillez s√©lectionner le nombre de couchages
          </div>
         </div>
        </div>
       </div><!-- Description du logement avec IA -->
       <div class="field-with-ai">
        <div class="flex items-center justify-between mb-2"><label for="housing-description" class="block text-sm font-medium text-gray-700 required"> Description de mon logement <span class="tooltip"> <span class="text-blue-500">‚ÑπÔ∏è</span> <span class="tooltiptext">D√©crivez votre logement de mani√®re attractive pour s√©duire les futurs swappers</span> </span> </label> <button type="button" class="text-sm text-gray-500 hover:text-green-600 transition-colors cursor-pointer" onclick="openHousingAIModal()" title="Aide √† la r√©daction"> ‚≠ê Aide </button>
        </div><textarea id="housing-description" class="textarea-field" placeholder="D√©crivez votre logement : ambiance, points forts, quartier..." required maxlength="500"></textarea>
        <div class="character-count" id="housing-description-count">
         0/500 caract√®res
        </div>
        <div class="error-message" id="housing-description-error">
         Veuillez d√©crire votre logement
        </div><!-- Exemples d'inspiration -->
        <div class="mt-3"><button type="button" class="btn-secondary text-sm" onclick="showHousingExamples()"> üí° Voir des exemples d'annonces </button>
        </div>
        <div class="ai-suggestion" id="housing-ai-suggestion">
         <h4>ü§ñ Suggestions IA</h4>
         <p id="housing-ai-text"></p><button type="button" onclick="useAISuggestion('housing-description', 'housing-ai-text')">Utiliser cette suggestion</button> <button type="button" onclick="hideAISuggestion('housing-ai-suggestion')">Fermer</button>
        </div><!-- Modal aide IA pour description logement -->
        <div id="housing-ai-modal" class="modal">
         <div class="modal-content max-w-2xl">
          <h3 class="text-xl font-bold text-green-800 mb-4">‚≠ê Aide √† la r√©daction de votre annonce</h3>
          <p class="text-gray-600 mb-6">R√©pondez √† quelques questions pour g√©n√©rer une description attractive de votre logement</p>
          <div class="space-y-4 mb-6">
           <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="block text-sm font-medium text-green-700 mb-2">Ambiance du logement</label> <select id="modal-housing-ambiance" class="input-field text-sm"> <option value="">Choisir...</option> <option value="moderne">Moderne et √©pur√©</option> <option value="cosy">Cosy et chaleureux</option> <option value="lumineux">Lumineux et spacieux</option> <option value="authentique">Authentique et charme</option> <option value="design">Design et contemporain</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Point fort principal</label> <select id="modal-housing-strength" class="input-field text-sm"> <option value="">Choisir...</option> <option value="vue">Belle vue</option> <option value="localisation">Emplacement id√©al</option> <option value="calme">Tr√®s calme</option> <option value="transport">Proche transports</option> <option value="espace">Grand espace</option> <option value="terrasse">Terrasse/balcon</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Type de quartier</label> <select id="modal-housing-neighborhood" class="input-field text-sm"> <option value="">Choisir...</option> <option value="centre">Centre-ville anim√©</option> <option value="residentiel">R√©sidentiel calme</option> <option value="branche">Branch√© et culturel</option> <option value="authentique">Authentique et local</option> <option value="nature">Proche nature</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">√âquipement sp√©cial</label> <input type="text" id="modal-housing-special" class="input-field text-sm" placeholder="Ex: piscine, jardin...">
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Ce qui rend votre logement unique</label> <input type="text" id="modal-housing-unique" class="input-field text-sm" placeholder="Ex: vue panoramique, d√©co vintage...">
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Activit√©s √† proximit√©</label> <input type="text" id="modal-housing-activities" class="input-field text-sm" placeholder="Ex: mus√©es, parcs, restaurants...">
            </div>
           </div>
          </div>
          <div class="flex gap-3 mb-4"><button class="btn-primary flex-1" onclick="generateHousingDescriptionFromModal()" id="modal-housing-generate-btn"> ‚ú® G√©n√©rer ma description </button> <button class="btn-secondary" onclick="closeHousingAIModal()"> Annuler </button>
          </div><!-- Zone de r√©sultat -->
          <div id="housing-ai-result" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
           <h4 class="font-semibold text-green-800 mb-2">üéâ Votre description g√©n√©r√©e :</h4>
           <p id="housing-ai-generated-text" class="text-gray-700 mb-3 leading-relaxed"></p>
           <div class="flex gap-2"><button class="btn-primary text-sm" onclick="useGeneratedHousingDescription()">Utiliser cette description</button> <button class="btn-secondary text-sm" onclick="regenerateHousingDescription()">G√©n√©rer une autre</button>
           </div>
          </div>
         </div>
        </div><!-- Modal exemples -->
        <div id="housing-examples-modal" class="modal">
         <div class="modal-content max-w-4xl">
          <h3 class="text-xl font-bold mb-4">üí° Exemples d'annonces inspirantes</h3>
          <div class="space-y-4 max-h-96 overflow-y-auto">
           <div class="bg-gray-50 p-3 rounded-lg">
            <h5 class="font-semibold text-green-700 mb-2">Appartement moderne - Paris</h5>
            <p class="text-sm text-gray-700">"Magnifique appartement lumineux au c≈ìur du Marais ! R√©cemment r√©nov√© avec go√ªt, il offre tout le confort moderne dans un quartier historique plein de charme. √Ä 2 minutes du m√©tro, parfait pour explorer Paris tout en profitant d'un havre de paix."</p><button class="btn-ai mt-2" onclick="copyExample(this.previousElementSibling.textContent)">Copier</button>
           </div>
           <div class="bg-gray-50 p-3 rounded-lg">
            <h5 class="font-semibold text-green-700 mb-2">Maison avec jardin - Lyon</h5>
            <p class="text-sm text-gray-700">"Charmante maison avec jardin dans un quartier r√©sidentiel calme de Lyon. Id√©ale pour se ressourcer apr√®s une journ√©e de d√©couverte ! Proche des transports, vous serez au centre-ville en 15 minutes. Parfait pour les amoureux de tranquillit√©."</p><button class="btn-ai mt-2" onclick="copyExample(this.previousElementSibling.textContent)">Copier</button>
           </div>
           <div class="bg-gray-50 p-3 rounded-lg">
            <h5 class="font-semibold text-green-700 mb-2">Studio cosy - Bordeaux</h5>
            <p class="text-sm text-gray-700">"Studio cosy et bien √©quip√© dans le quartier des Chartrons. D√©co soign√©e, cuisine fonctionnelle et ambiance chaleureuse garantie ! √Ä deux pas des meilleurs bars √† vin et restaurants de Bordeaux. L'endroit parfait pour d√©couvrir l'art de vivre bordelais."</p><button class="btn-ai mt-2" onclick="copyExample(this.previousElementSibling.textContent)">Copier</button>
           </div>
          </div>
          <div class="flex justify-end mt-4"><button class="btn-secondary" onclick="closeHousingExamples()">Fermer</button>
          </div>
         </div>
        </div>
       </div><!-- √âquipements essentiels -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üè† √âquipements essentiels</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3"><label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="wifi"> <span class="text-sm">üì∂ Wifi</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="workspace"> <span class="text-sm">üíª Espace de travail</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="kitchen"> <span class="text-sm">üç≥ Cuisine √©quip√©e</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="washing-machine"> <span class="text-sm">üß∫ Machine √† laver</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="balcony"> <span class="text-sm">üåø Balcon / terrasse</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="parking"> <span class="text-sm">üöó Parking</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="equipment-checkbox" value="pets-allowed"> <span class="text-sm">üêæ Animaux accept√©s</span> </label>
        </div>
        <div class="mt-4"><label class="block text-sm font-medium text-gray-700 mb-2">Autre √©quipement diff√©renciant</label> <input type="text" id="other-equipment" class="input-field" placeholder="Ex: Piscine, V√©lo, Piano, Climatisation...">
         <p class="text-xs text-gray-500 mt-1">üí° Mentionnez uniquement les √©quipements sp√©ciaux qui vous distinguent</p>
        </div>
       </div><!-- Obligations -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üìã Obligations pour la personne qui vient chez moi (facultatif)</h3>
        <p class="text-sm text-gray-600 mb-4">üí° Pr√©cisez ce que vous attendez de votre swapper pendant son s√©jour</p>
        <div class="space-y-3"><label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="obligation-checkbox" value="pet-care"> <span class="text-sm">üêæ Garder mon animal</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="obligation-checkbox" value="plants"> <span class="text-sm">üå± Arroser mes plantes</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="obligation-checkbox" value="mail"> <span class="text-sm">üì¨ Relever le courrier</span> </label>
        </div>
        <div class="mt-4"><label class="block text-sm font-medium text-gray-700 mb-2">Autres obligations ou instructions</label> <textarea id="other-obligations" class="textarea-field" placeholder="Ex: Arroser le jardin, sortir les poubelles le mardi..." style="min-height: 80px;"></textarea>
        </div>
       </div><!-- Photos -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üì∑ Photos de mon logement</h3>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
         <div class="text-center">
          <div class="text-4xl mb-2">
           üì∏
          </div>
          <h4 class="font-semibold text-blue-800 mb-2">Photos demand√©es dans un second temps</h4>
          <p class="text-sm text-blue-700 mb-3">Nous vous demanderons d'ajouter vos photos apr√®s la cr√©ation du profil pour optimiser vos chances de match !</p>
          <div class="bg-white rounded-lg p-3 border border-blue-300">
           <p class="text-sm text-gray-700">üí° <strong>Conseil :</strong> Pr√©parez 5-8 photos de qualit√© de votre logement (salon, chambre, cuisine, salle de bain, ext√©rieur si applicable)</p>
          </div>
         </div>
        </div>
       </div>
       <div class="flex justify-end"><button type="button" class="btn-primary" onclick="validateAndNext(1)"> Continuer ‚Üí </button>
       </div>
      </div>
     </div>
    </div><!-- √âtape 2: Style d'√©change -->
    <div class="step-card hidden" id="step-2">
     <div class="step-header">
      <div class="emoji-large">
       üîÑ
      </div>
      <h2 class="text-2xl font-bold mb-2">Mon style d'√©change</h2>
      <p class="text-green-100">D√©finissez vos pr√©f√©rences d'√©change d'appartement</p>
     </div>
     <div class="step-content">
      <div class="space-y-6"><!-- Encart explicatif -->
       <div class="bg-gradient-to-r from-green-50 to-yellow-50 border border-green-200 rounded-lg p-4">
        <h3 class="font-semibold text-green-800 mb-2">üéØ Pourquoi ces informations ?</h3>
        <p class="text-sm text-green-700 mb-2">L'objectif est de vous mettre en relation avec des personnes qui correspondent √† vos attentes en mati√®re d'√©change d'appartement.</p>
        <p class="text-sm text-green-700">üí° Plus vous √™tes pr√©cis sur vos pr√©f√©rences, plus &amp;SWAPP pourra vous proposer des matches compatibles et r√©ussir votre exp√©rience d'√©change !</p>
       </div>
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4 required">Style d'√©change</h3>
        <div class="space-y-4">
         <div class="selection-card" data-exchange-style="reciprocal">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üîÑ
           </div>
           <div>
            <h4 class="font-semibold">√âchange r√©ciproque</h4>
            <p class="text-sm text-gray-600">Chacun s√©journe chez l'autre aux m√™mes dates</p>
           </div>
          </div>
         </div>
         <div class="selection-card" data-exchange-style="delayed">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            ‚è≥
           </div>
           <div>
            <h4 class="font-semibold">√âchange d√©cal√©</h4>
            <p class="text-sm text-gray-600">Accueillir pendant votre absence, s√©journer plus tard</p>
           </div>
          </div>
         </div>
         <div class="selection-card" data-exchange-style="both">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            ‚öñÔ∏è
           </div>
           <div>
            <h4 class="font-semibold">Ouvert aux deux</h4>
            <p class="text-sm text-gray-600">Flexible selon les opportunit√©s</p>
           </div>
          </div>
         </div>
        </div>
        <div class="error-message" id="exchange-style-error">
         Veuillez s√©lectionner un style d'√©change
        </div>
       </div><!-- Dates de disponibilit√© (conditionnelles) -->
       <div id="availability-section" class="hidden">
        <h3 class="text-lg font-semibold text-gray-700 mb-4 required">üìÖ Dates o√π mon logement sera libre pour accueillir</h3>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
         <p class="text-sm text-blue-700">üí° <strong>Conseil :</strong> Ajoutez un maximum de cr√©neaux pour augmenter vos chances de match ! Vous pourrez toujours en ajouter d'autres plus tard dans votre profil.</p>
        </div>
        <p class="text-sm text-gray-600 mb-4">S√©lectionnez les p√©riodes o√π votre logement sera disponible (vous ne serez pas chez vous)</p>
        <div id="availability-ranges">
         <div class="date-range bg-gray-50 border border-gray-200 rounded-lg p-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
           <div><label class="block text-sm font-medium text-gray-600 mb-2">Du</label> <input type="date" id="availability-start" class="input-field availability-start">
           </div>
           <div><label class="block text-sm font-medium text-gray-600 mb-2">Au</label> <input type="date" id="availability-end" class="input-field availability-end">
           </div>
          </div>
         </div>
        </div><button type="button" class="btn-secondary mt-3" onclick="addAvailabilityRange()"> ‚ûï Ajouter une autre p√©riode </button>
        <div class="error-message" id="availability-error">
         Veuillez s√©lectionner vos dates de disponibilit√©
        </div>
       </div>
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4 required">üë• Avec qui je voyage</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div class="selection-card" data-travel-with="alone">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üë§
           </div>
           <div>
            <h4 class="font-semibold">Seul(e)</h4>
           </div>
          </div>
         </div>
         <div class="selection-card" data-travel-with="couple">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üíë
           </div>
           <div>
            <h4 class="font-semibold">En couple</h4>
           </div>
          </div>
         </div>
         <div class="selection-card" data-travel-with="colocation">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üèòÔ∏è
           </div>
           <div>
            <h4 class="font-semibold">En colocation</h4>
           </div>
          </div>
         </div>
         <div class="selection-card" data-travel-with="family">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üë™
           </div>
           <div>
            <h4 class="font-semibold">En famille</h4>
           </div>
          </div>
         </div>
         <div class="selection-card" data-travel-with="other">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            ‚ú®
           </div>
           <div>
            <h4 class="font-semibold">Autre</h4>
           </div>
          </div>
         </div>
        </div><!-- Champs conditionnels -->
        <div class="mt-4 space-y-4">
         <div class="hidden" id="colocation-details"><label class="block text-sm font-medium text-gray-700 mb-2">Pr√©ciser le nombre de colocataires qui voyagent avec vous</label> <input type="number" id="colocation-number" class="input-field" placeholder="Ex: 3" min="2" max="10">
         </div>
         <div class="hidden" id="other-travel-details"><label class="block text-sm font-medium text-gray-700 mb-2">√Ä pr√©ciser</label> <input type="text" id="other-travel-description" class="input-field" placeholder="Ex: Avec des amis, groupe d'√©tudiants...">
         </div>
        </div>
        <div class="error-message" id="travel-with-error">
         Veuillez s√©lectionner avec qui vous voyagez
        </div>
       </div>
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4 required">Avez-vous un animal ?</h3>
        <div class="flex gap-4"><label class="flex items-center cursor-pointer"> <input type="radio" name="has-pet" value="yes" class="mr-2"> <span>Oui</span> </label> <label class="flex items-center cursor-pointer"> <input type="radio" name="has-pet" value="no" class="mr-2"> <span>Non</span> </label>
        </div>
        <div class="error-message" id="has-pet-error">
         Veuillez indiquer si vous avez un animal
        </div>
        <div class="hidden mt-4" id="pet-details">
         <div class="space-y-4">
          <div><label class="block text-sm font-medium text-gray-700 mb-2">Type d'animal</label> <select id="pet-type" class="input-field"> <option value="">S√©lectionner</option> <option value="dog">Chien</option> <option value="cat">Chat</option> <option value="other">Autre</option> </select>
          </div>
          <div><label class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="pet-description" class="textarea-field" placeholder="Ex: petit chien calme, gros chat ind√©pendant..." style="min-height: 80px;"></textarea>
          </div>
          <div><label class="block text-sm font-medium text-gray-700 mb-2">Voyagez-vous avec votre animal ?</label>
           <div class="flex gap-4"><label class="flex items-center cursor-pointer"> <input type="radio" name="travel-with-pet" value="yes" class="mr-2"> <span>Oui</span> </label> <label class="flex items-center cursor-pointer"> <input type="radio" name="travel-with-pet" value="no" class="mr-2"> <span>Non</span> </label>
           </div>
          </div>
         </div>
        </div>
       </div><!-- Profil id√©al swapper avec IA -->
       <div class="field-with-ai">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üë§ Profil id√©al de mon swapper (facultatif)</h3>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
         <p class="text-sm text-blue-700">üí° <strong>Info :</strong> Ces crit√®res sont purement indicatifs et appara√Ætront dans votre annonce. &amp;SWAPP propose des matches bas√©s sur la compatibilit√©, mais ces pr√©f√©rences ne sont pas √©liminatoires.</p>
        </div>
        <div>
         <div class="flex items-center justify-between mb-2"><label class="block text-sm font-medium text-gray-700">Description libre</label> <button type="button" class="text-sm text-gray-500 hover:text-green-600 transition-colors cursor-pointer" onclick="openSwapperAIModal()" title="Aide √† la r√©daction"> ‚≠ê Aide </button>
         </div><textarea id="ideal-swapper-description" class="textarea-field" placeholder="Ex: Personne calme et respectueuse, amateur de culture, jeune professionnel..." style="min-height: 100px;" maxlength="300"></textarea>
         <div class="character-count" id="ideal-swapper-count">
          0/300 caract√®res
         </div>
        </div>
        <div class="mt-4"><label class="block text-sm font-medium text-gray-700 mb-3">Tranche d'√¢ge souhait√©e</label>
         <div class="grid grid-cols-2 md:grid-cols-4 gap-3"><label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="age-preference" value="18-25"> <span class="text-sm">18-25 ans</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="age-preference" value="26-35"> <span class="text-sm">26-35 ans</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="age-preference" value="36-50"> <span class="text-sm">36-50 ans</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="age-preference" value="50+"> <span class="text-sm">50+ ans</span> </label>
         </div>
        </div><!-- Modal aide IA pour profil swapper -->
        <div id="swapper-ai-modal" class="modal">
         <div class="modal-content max-w-2xl">
          <h3 class="text-xl font-bold text-green-800 mb-4">‚≠ê Aide pour d√©crire votre swapper id√©al</h3>
          <p class="text-gray-600 mb-6">R√©pondez √† quelques questions pour g√©n√©rer une description de votre profil swapper id√©al</p>
          <div class="space-y-4 mb-6">
           <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="block text-sm font-medium text-green-700 mb-2">Tranche d'√¢ge pr√©f√©r√©e</label> <select id="modal-swapper-age" class="input-field text-sm"> <option value="">Peu importe</option> <option value="jeune">Jeune (18-30 ans)</option> <option value="adulte">Adulte (30-50 ans)</option> <option value="senior">Senior (50+ ans)</option> <option value="similaire">Similaire √† mon √¢ge</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Style de voyageur recherch√©</label> <select id="modal-swapper-style" class="input-field text-sm"> <option value="">Choisir...</option> <option value="calme">Calme et respectueux</option> <option value="sociable">Sociable et ouvert</option> <option value="independant">Ind√©pendant et discret</option> <option value="culturel">Amateur de culture</option> <option value="aventurier">Esprit aventurier</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Situation professionnelle</label> <select id="modal-swapper-profession" class="input-field text-sm"> <option value="">Peu importe</option> <option value="etudiant">√âtudiant</option> <option value="professionnel">Jeune professionnel</option> <option value="cadre">Cadre exp√©riment√©</option> <option value="freelance">Freelance/Ind√©pendant</option> <option value="retraite">Retrait√© actif</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Centres d'int√©r√™t</label> <select id="modal-swapper-interests" class="input-field text-sm"> <option value="">Choisir...</option> <option value="culture">Culture et mus√©es</option> <option value="gastronomie">Gastronomie locale</option> <option value="nature">Nature et randonn√©e</option> <option value="art">Art et cr√©ativit√©</option> <option value="sport">Sport et activit√©s</option> <option value="histoire">Histoire et patrimoine</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Qualit√© importante</label> <select id="modal-swapper-quality" class="input-field text-sm"> <option value="">Choisir...</option> <option value="respectueux">Respectueux du logement</option> <option value="propre">Soigneux et propre</option> <option value="communicatif">Bon communicant</option> <option value="flexible">Flexible et adaptable</option> <option value="responsable">Responsable et fiable</option> </select>
            </div>
            <div><label class="block text-sm font-medium text-green-700 mb-2">Autre crit√®re important</label> <input type="text" id="modal-swapper-other" class="input-field text-sm" placeholder="Ex: non-fumeur, avec exp√©rience √©change...">
            </div>
           </div>
          </div>
          <div class="flex gap-3 mb-4"><button class="btn-primary flex-1" onclick="generateSwapperProfileFromModal()" id="modal-swapper-generate-btn"> ‚ú® G√©n√©rer ma description </button> <button class="btn-secondary" onclick="closeSwapperAIModal()"> Annuler </button>
          </div><!-- Zone de r√©sultat -->
          <div id="swapper-ai-result" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
           <h4 class="font-semibold text-green-800 mb-2">üéâ Votre description g√©n√©r√©e :</h4>
           <p id="swapper-ai-generated-text" class="text-gray-700 mb-3 leading-relaxed"></p>
           <div class="flex gap-2"><button class="btn-primary text-sm" onclick="useGeneratedSwapperProfile()">Utiliser cette description</button> <button class="btn-secondary text-sm" onclick="regenerateSwapperProfile()">G√©n√©rer une autre</button>
           </div>
          </div>
         </div>
        </div>
       </div><!-- Flexibilit√© recherch√©e -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üîÑ Flexibilit√© recherch√©e</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3"><label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="flexibility-checkbox" value="dates"> <span class="text-sm">üóìÔ∏è Flexible sur les dates</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="flexibility-checkbox" value="duration"> <span class="text-sm">‚è∞ Flexible sur la dur√©e</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="flexibility-checkbox" value="destination"> <span class="text-sm">üìç Flexible sur la destination</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="flexibility-checkbox" value="exchange-type"> <span class="text-sm">üîÑ Flexible sur le type d'√©change</span> </label>
        </div>
       </div>
       <div class="flex justify-between"><button type="button" class="btn-secondary" onclick="goToStep(1)"> ‚Üê Retour </button> <button type="button" class="btn-primary" onclick="validateAndNext(2)"> Continuer ‚Üí </button>
       </div>
      </div>
     </div>
    </div><!-- √âtape 3: Cr√©ation exp√©rience -->
    <div class="step-card hidden" id="step-3">
     <div class="step-header">
      <div class="emoji-large">
       ‚ú®
      </div>
      <h2 class="text-2xl font-bold mb-2">Cr√©ation de mon exp√©rience</h2>
      <p class="text-green-100">Cr√©ons votre annonce d'√©change attractive</p>
     </div>
     <div class="step-content">
      <div class="space-y-6"><!-- Explication exp√©rience &SWAPP -->
       <div class="bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4">
        <h3 class="font-semibold text-green-800 mb-2">üåü Qu'est-ce qu'une exp√©rience &amp;SWAPP ?</h3>
        <p class="text-sm text-green-700 mb-3">Une exp√©rience &amp;SWAPP, c'est votre projet d'√©change personnalis√© ! Vous d√©finissez :</p>
        <ul class="text-sm text-green-700 space-y-1 ml-4">
         <li>‚Ä¢ <strong>Votre destination</strong> : ville pr√©cise, r√©gion ou type de lieu</li>
         <li>‚Ä¢ <strong>Vos dates</strong> : p√©riodes fixes ou flexibles selon vos envies</li>
         <li>‚Ä¢ <strong>Votre motivation</strong> : ce qui vous anime dans ce projet</li>
        </ul>
        <p class="text-sm text-green-700 mt-3">üí° Plus votre exp√©rience est d√©taill√©e et authentique, plus vous attirerez des swappers compatibles !</p>
       </div>
       <div class="field-with-ai"><label for="main-destination" class="block text-sm font-medium text-gray-700 mb-2 required"> Destination souhait√©e <span class="tooltip"> <span class="text-blue-500">‚ÑπÔ∏è</span> <span class="tooltiptext">Choisissez votre destination de r√™ve ou laissez-vous surprendre !</span> </span> </label>
        <div class="flex gap-2 mb-2"><input type="text" id="main-destination" class="input-field flex-1" placeholder="Ex: Barcelone, Tokyo, New York..." required> <button type="button" class="btn-ai" onclick="generateDestinationSuggestion()" id="destination-ai-btn" title="Aide IA pour destination"> ‚ú® Aide </button> <button type="button" class="btn-secondary px-3" onclick="openDestinationModal()" title="Surprends-moi !"> üé≤ Surprends-moi </button>
        </div><!-- Villes disponibles sur &SWAPP -->
        <div class="mb-3"><button type="button" class="btn-secondary text-sm" onclick="showAvailableCities()"> üåç Voir les villes disponibles sur &amp;SWAPP </button>
        </div>
        <div class="error-message" id="main-destination-error">
         Veuillez saisir votre destination
        </div><!-- Liste des villes disponibles -->
        <div id="available-cities" class="hidden bg-gray-50 border border-gray-200 rounded-lg p-4 mt-3">
         <h5 class="font-semibold text-gray-700 mb-3">üèôÔ∏è Villes populaires sur &amp;SWAPP</h5>
         <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm"><button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Paris (France)')">üá´üá∑ Paris</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Barcelone (Espagne)')">üá™üá∏ Barcelone</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Lisbonne (Portugal)')">üáµüáπ Lisbonne</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Berlin (Allemagne)')">üá©üá™ Berlin</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Rome (Italie)')">üáÆüáπ Rome</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Amsterdam (Pays-Bas)')">üá≥üá± Amsterdam</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Londres (Royaume-Uni)')">üá¨üáß Londres</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Madrid (Espagne)')">üá™üá∏ Madrid</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Copenhague (Danemark)')">üá©üá∞ Copenhague</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Stockholm (Su√®de)')">üá∏üá™ Stockholm</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('New York (√âtats-Unis)')">üá∫üá∏ New York</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Montr√©al (Canada)')">üá®üá¶ Montr√©al</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Tokyo (Japon)')">üáØüáµ Tokyo</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Sydney (Australie)')">üá¶üá∫ Sydney</button> <button class="city-btn text-left p-2 rounded hover:bg-blue-100 transition-colors" onclick="selectCity('Singapour (Singapour)')">üá∏üá¨ Singapour</button>
         </div><button type="button" class="btn-secondary text-sm mt-3" onclick="hideAvailableCities()">Fermer</button>
        </div>
        <div class="ai-suggestion" id="destination-ai-suggestion">
         <h4>ü§ñ Suggestions IA</h4>
         <p id="destination-ai-text"></p><button type="button" onclick="useAISuggestion('main-destination', 'destination-ai-text')">Utiliser cette suggestion</button> <button type="button" onclick="hideAISuggestion('destination-ai-suggestion')">Fermer</button>
        </div>
       </div><!-- Titre avec IA -->
       <div class="field-with-ai"><label for="experience-title" class="block text-sm font-medium text-gray-700 mb-2 required"> Titre de votre exp√©rience <span class="tooltip"> <span class="text-blue-500">‚ÑπÔ∏è</span> <span class="tooltiptext">Un titre accrocheur augmente vos chances de match !</span> </span> </label>
        <div class="ai-button-container"><button type="button" class="btn-ai" onclick="generateExperienceTitle()" id="title-ai-btn"> <span class="ai-text">‚ú® Aide</span> </button>
        </div><input type="text" id="experience-title" class="input-field" placeholder="Ex: √âchange Paris ‚Üî Lisbonne - D√©couverte culturelle" required maxlength="100">
        <div class="character-count" id="experience-title-count">
         0/100 caract√®res
        </div>
        <div class="error-message" id="experience-title-error">
         Veuillez saisir un titre pour votre exp√©rience
        </div>
        <div class="ai-suggestion" id="title-ai-suggestion">
         <h4>ü§ñ Suggestions IA</h4>
         <p id="title-ai-text"></p><button type="button" onclick="useAISuggestion('experience-title', 'title-ai-text')">Utiliser cette suggestion</button> <button type="button" onclick="hideAISuggestion('title-ai-suggestion')">Fermer</button>
        </div>
       </div><!-- Description avec IA -->
       <div class="field-with-ai"><label for="experience-description" class="block text-sm font-medium text-gray-700 mb-2 required"> Description de votre exp√©rience <span class="tooltip"> <span class="text-blue-500">‚ÑπÔ∏è</span> <span class="tooltiptext">Partagez vos motivations et ce que vous recherchez dans cet √©change</span> </span> </label>
        <div class="ai-button-container"><button type="button" class="btn-ai" onclick="generateExperienceDescription()" id="description-ai-btn"> <span class="ai-text">‚ú® Aide</span> </button>
        </div><textarea id="experience-description" class="textarea-field" placeholder="D√©crivez votre projet d'√©change, vos motivations, ce que vous recherchez..." required maxlength="800"></textarea>
        <div class="character-count" id="experience-description-count">
         0/800 caract√®res
        </div>
        <div class="error-message" id="experience-description-error">
         Veuillez d√©crire votre exp√©rience
        </div>
        <div class="ai-suggestion" id="description-ai-suggestion">
         <h4>ü§ñ Suggestions IA</h4>
         <p id="description-ai-text"></p><button type="button" onclick="useAISuggestion('experience-description', 'description-ai-text')">Utiliser cette suggestion</button> <button type="button" onclick="hideAISuggestion('description-ai-suggestion')">Fermer</button>
        </div>
       </div>
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4 required">Dates souhait√©es</h3>
        <div id="date-ranges">
         <div class="date-range bg-gray-50 border border-gray-200 rounded-lg p-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
           <div><label class="block text-sm font-medium text-gray-600 mb-2">Date de d√©part</label> <input type="date" id="date-start" class="input-field date-start" required>
           </div>
           <div><label class="block text-sm font-medium text-gray-600 mb-2">Date de retour</label> <input type="date" id="date-end" class="input-field date-end" required>
           </div>
          </div>
         </div>
        </div><button type="button" class="btn-secondary mt-3" onclick="addDateRange()"> ‚ûï Ajouter une autre plage de dates </button>
        <div class="error-message" id="dates-error">
         Veuillez s√©lectionner vos dates de voyage
        </div>
        <div class="mt-6">
         <h4 class="text-md font-semibold text-gray-700 mb-3">P√©riode flexible (facultatif)</h4>
         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div><label class="block text-sm font-medium text-gray-600 mb-2">Dur√©e souhait√©e</label> <select class="input-field" id="flexible-duration"> <option value="">S√©lectionner une dur√©e</option> <option value="weekend">Un week-end</option> <option value="week">Une semaine</option> <option value="2weeks">Deux semaines</option> <option value="month">Un mois</option> <option value="flexible">Flexible</option> </select>
          </div>
          <div><label class="block text-sm font-medium text-gray-600 mb-2">P√©riode g√©n√©rale</label> <input type="text" id="flexible-period" class="input-field" placeholder="Ex: √©t√© 2024, automne...">
          </div>
         </div>
        </div>
       </div><!-- Options flexibles destination -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üåç Options flexibles (facultatif - s√©lection multiple possible)</h3>
        <p class="text-sm text-gray-600 mb-4">üí° Ajouter des options flexibles augmente vos chances de match !</p>
        <div class="space-y-3">
         <div class="flexible-option bg-blue-50 border border-blue-200 rounded-lg p-4" data-flexible-type="region"><label class="flex items-center cursor-pointer"> <input type="checkbox" class="flexible-checkbox mr-3" value="region">
           <div>
            <h5 class="font-semibold">üåç R√©gion / zone g√©ographique</h5>
            <p class="text-sm text-gray-600">Ex: Sud de la France, Ouest canadien, √† moins de 3h de vol de Washington</p>
           </div></label>
          <div class="mt-3 hidden" id="region-input"><input type="text" class="input-field" placeholder="Ex: Sud de l'am√©rique">
          </div>
         </div>
         <div class="flexible-option bg-blue-50 border border-blue-200 rounded-lg p-4" data-flexible-type="cities"><label class="flex items-center cursor-pointer"> <input type="checkbox" class="flexible-checkbox mr-3" value="cities">
           <div>
            <h5 class="font-semibold">üìç Liste de 3 √† 5 autres villes</h5>
            <p class="text-sm text-gray-600">Ex: Barcelone, Rome, Porto, S√©ville, Madrid</p>
           </div></label>
          <div class="mt-3 hidden" id="cities-input">
           <div class="grid grid-cols-1 md:grid-cols-2 gap-2"><input type="text" class="input-field" placeholder="Ville 1"> <input type="text" class="input-field" placeholder="Ville 2"> <input type="text" class="input-field" placeholder="Ville 3"> <input type="text" class="input-field" placeholder="Ville 4"> <input type="text" class="input-field" placeholder="Ville 5 (optionnel)">
           </div>
          </div>
         </div>
         <div class="flexible-option bg-blue-50 border border-blue-200 rounded-lg p-4" data-flexible-type="destination-type"><label class="flex items-center cursor-pointer"> <input type="checkbox" class="flexible-checkbox mr-3" value="destination-type">
           <div>
            <h5 class="font-semibold">‚òÄÔ∏è Type de destination</h5>
            <p class="text-sm text-gray-600">Ex: au soleil, en montagne, dans une capitale, ville culturelle</p>
           </div></label>
          <div class="mt-3 hidden" id="destination-type-input"><input type="text" class="input-field" placeholder="Ex: En montagne">
          </div>
         </div>
        </div>
       </div>
       <div class="flex justify-between"><button type="button" class="btn-secondary" onclick="goToStep(2)"> ‚Üê Retour </button> <button type="button" class="btn-primary" onclick="validateAndNext(3)"> Continuer ‚Üí </button>
       </div>
      </div>
     </div>
    </div><!-- √âtape 4: Infos personnelles -->
    <div class="step-card hidden" id="step-4">
     <div class="step-header">
      <div class="emoji-large">
       üë§
      </div>
      <h2 class="text-2xl font-bold mb-2">Mes informations personnelles</h2>
      <p class="text-green-100">Finalisez votre profil</p>
     </div>
     <div class="step-content">
      <div class="space-y-6"><!-- Informations de base -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üë§ Informations de base</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <div><label for="first-name" class="block text-sm font-medium text-gray-700 mb-2 required">Pr√©nom</label> <input type="text" id="first-name" class="input-field" placeholder="Marie" required>
          <div class="error-message" id="first-name-error">
           Veuillez saisir votre pr√©nom
          </div>
         </div>
         <div><label for="last-name" class="block text-sm font-medium text-gray-700 mb-2 required">Nom</label> <input type="text" id="last-name" class="input-field" placeholder="Dupont" required>
          <div class="error-message" id="last-name-error">
           Veuillez saisir votre nom
          </div>
         </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
         <div><label for="email" class="block text-sm font-medium text-gray-700 mb-2 required">Email</label> <input type="email" id="email" class="input-field" placeholder="marie@example.com" required>
          <div class="error-message" id="email-error">
           Veuillez saisir un email valide
          </div>
         </div>
         <div><label for="age" class="block text-sm font-medium text-gray-700 mb-2 required">√Çge</label> <input type="number" id="age" class="input-field" placeholder="28" min="18" max="99" required>
          <div class="error-message" id="age-error">
           Veuillez saisir votre √¢ge (18-99 ans)
          </div>
         </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
         <div><label for="phone" class="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone (WhatsApp)</label> <input type="tel" id="phone" class="input-field" placeholder="+33 6 12 34 56 78">
         </div>
         <div><label for="vie-company" class="block text-sm font-medium text-gray-700 mb-2">Soci√©t√© V.I.E (facultatif)</label> <input type="text" id="vie-company" class="input-field" placeholder="Ex: Airbus, Total, BNP Paribas...">
         </div>
        </div>
       </div><!-- Pr√©sentation personnelle avec IA -->
       <div class="field-with-ai">
        <div class="flex items-center justify-between mb-2"><label for="personal-presentation" class="block text-sm font-medium text-gray-700"> Pr√©sentation personnelle (facultatif) <span class="tooltip"> <span class="text-blue-500">‚ÑπÔ∏è</span> <span class="tooltiptext">Partagez qui vous √™tes pour cr√©er une connexion avec vos futurs swappers</span> </span> </label> <button type="button" class="text-sm text-gray-500 hover:text-green-600 transition-colors cursor-pointer" onclick="openPresentationAIModal()" title="Aide √† la r√©daction"> ‚≠ê Aide </button>
        </div><textarea id="personal-presentation" class="textarea-field" placeholder="Parlez de vous : vos passions, votre travail, ce qui vous anime..." maxlength="400"></textarea>
        <div class="character-count" id="personal-presentation-count">
         0/400 caract√®res
        </div>
       </div><!-- Style de s√©jour et motivations -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üí´ Mon style et mes motivations</h3><!-- Pourquoi j'√©change -->
        <div class="mb-6">
         <h4 class="text-md font-semibold text-gray-700 mb-3">üí≠ Pourquoi j'√©change (2 choix max)</h4>
         <div class="grid grid-cols-1 md:grid-cols-2 gap-3"><label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="reason-checkbox" value="change-air"> <span class="text-sm">üå¨Ô∏è Changer d'air / t√©l√©travailler ailleurs</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="reason-checkbox" value="culture"> <span class="text-sm">üåç D√©couvrir une autre culture</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="reason-checkbox" value="break"> <span class="text-sm">üòå Faire une pause / un break</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="reason-checkbox" value="family"> <span class="text-sm">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Rejoindre des proches</span> </label> <label class="flex items-center space-x-2 cursor-pointer"> <input type="checkbox" class="reason-checkbox" value="climate"> <span class="text-sm">‚òÄÔ∏è Profiter d'un climat diff√©rent</span> </label>
         </div>
         <div class="mt-4"><label class="block text-sm font-medium text-gray-700 mb-2">Autre raison</label> <input type="text" id="other-reason" class="input-field" placeholder="Pr√©cisez votre motivation...">
         </div>
        </div><!-- Style de s√©jour -->
        <div class="mb-6">
         <h4 class="text-md font-semibold text-gray-700 mb-3">üåà Mon style de s√©jour (1 choix max)</h4>
         <div class="space-y-3">
          <div class="selection-card" data-stay-style="calm">
           <div class="flex items-center">
            <div class="text-2xl mr-4">
             üßò
            </div>
            <div>
             <h5 class="font-semibold">Calme &amp; reposant</h5>
            </div>
           </div>
          </div>
          <div class="selection-card" data-stay-style="dynamic">
           <div class="flex items-center">
            <div class="text-2xl mr-4">
             üéâ
            </div>
            <div>
             <h5 class="font-semibold">Dynamique &amp; festif</h5>
            </div>
           </div>
          </div>
          <div class="selection-card" data-stay-style="immersive">
           <div class="flex items-center">
            <div class="text-2xl mr-4">
             üèõÔ∏è
            </div>
            <div>
             <h5 class="font-semibold">Immersif &amp; local</h5>
            </div>
           </div>
          </div>
          <div class="selection-card" data-stay-style="work">
           <div class="flex items-center">
            <div class="text-2xl mr-4">
             üíª
            </div>
            <div>
             <h5 class="font-semibold">T√©l√©travail &amp; routine</h5>
            </div>
           </div>
          </div>
          <div class="selection-card" data-stay-style="nature">
           <div class="flex items-center">
            <div class="text-2xl mr-4">
             üå≤
            </div>
            <div>
             <h5 class="font-semibold">Nature &amp; ext√©rieur</h5>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div><!-- Type de voyageur -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">‚úàÔ∏è Quel voyageur je suis</h3>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
         <p class="text-sm text-blue-700">üí° <strong>Info :</strong> Ces informations sont purement indicatives pour informer vos futurs swappers. Elles ne bloquent aucun √©change potentiel ! Vous pouvez s√©lectionner plusieurs profils.</p>
        </div>
        <div class="space-y-3">
         <div class="selection-card traveler-type-card" data-traveler-type="strict-planner">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üóìÔ∏è
           </div>
           <div>
            <h5 class="font-semibold">Le Planificateur strict</h5>
            <p class="text-sm text-gray-600">Tout est cal√© longtemps √† l'avance, agenda tr√®s organis√©</p>
           </div>
          </div>
         </div>
         <div class="selection-card traveler-type-card" data-traveler-type="predictable">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üìå
           </div>
           <div>
            <h5 class="font-semibold">Le Pr√©visible</h5>
            <p class="text-sm text-gray-600">Je pr√©vois √† l'avance mais garde des marges pour ajuster</p>
           </div>
          </div>
         </div>
         <div class="selection-card traveler-type-card" data-traveler-type="flexible">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üîÑ
           </div>
           <div>
            <h5 class="font-semibold">Le Flexible</h5>
            <p class="text-sm text-gray-600">Je sais quand je ne peux pas et je construis autour</p>
           </div>
          </div>
         </div>
         <div class="selection-card traveler-type-card" data-traveler-type="opportunist">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            ‚ö°Ô∏è
           </div>
           <div>
            <h5 class="font-semibold">L'Opportuniste</h5>
            <p class="text-sm text-gray-600">Je ne planifie pas mais je saisis les bonnes occasions</p>
           </div>
          </div>
         </div>
         <div class="selection-card traveler-type-card" data-traveler-type="spontaneous">
          <div class="flex items-center">
           <div class="text-2xl mr-4">
            üåç
           </div>
           <div>
            <h5 class="font-semibold">Le Spontan√© total</h5>
            <p class="text-sm text-gray-600">Je d√©cide presque uniquement √† la derni√®re minute</p>
           </div>
          </div>
         </div>
        </div>
       </div><!-- Ce qu'il faut savoir sur moi -->
       <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-4">üîë Ce qu'il faut savoir sur moi</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
         <div><label class="block text-sm font-medium text-gray-700 mb-2">Fumeur</label>
          <div class="flex gap-4"><label class="flex items-center cursor-pointer"> <input type="radio" name="smoker" value="yes" class="mr-2"> <span>Oui</span> </label> <label class="flex items-center cursor-pointer"> <input type="radio" name="smoker" value="no" class="mr-2"> <span>Non</span> </label>
          </div>
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-2">T√©l√©travail</label>
          <div class="flex gap-4"><label class="flex items-center cursor-pointer"> <input type="radio" name="remote-work" value="yes" class="mr-2"> <span>Oui</span> </label> <label class="flex items-center cursor-pointer"> <input type="radio" name="remote-work" value="no" class="mr-2"> <span>Non</span> </label>
          </div>
         </div>
        </div>
       </div>
       <div class="flex justify-between"><button type="button" class="btn-secondary" onclick="goToStep(3)"> ‚Üê Retour </button> <button type="button" class="btn-primary" onclick="validateAndComplete()"> üöÄ Finaliser mon profil </button>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Destination Modal -->
  <div id="destination-modal" class="modal">
   <div class="modal-content">
    <div class="emoji-large">
     üé≤
    </div>
    <h3 class="text-2xl font-bold text-gray-800 mb-4">Destination surprise !</h3>
    <p class="text-gray-600 mb-6">Choisissez vos crit√®res pour g√©n√©rer une destination au hasard</p>
    <div class="space-y-4 mb-6">
     <div>
      <h4 class="font-semibold mb-2">üåà Votre mood</h4>
      <div class="grid grid-cols-3 gap-2"><button class="btn-secondary mood-btn" data-mood="sea">üèñÔ∏è Mer</button> <button class="btn-secondary mood-btn" data-mood="mountain">üèîÔ∏è Montagne</button> <button class="btn-secondary mood-btn" data-mood="city">üèôÔ∏è Ville</button>
      </div>
     </div>
     <div>
      <h4 class="font-semibold mb-2">üåç R√©gion du monde</h4>
      <div class="grid grid-cols-2 gap-2"><button class="btn-secondary region-btn" data-region="europe">üá™üá∫ Europe</button> <button class="btn-secondary region-btn" data-region="americas">üåé Am√©riques</button> <button class="btn-secondary region-btn" data-region="asia-oceania">üåè Asie/Oc√©anie</button> <button class="btn-secondary region-btn" data-region="africa">üåç Afrique</button>
      </div>
     </div>
     <div>
      <h4 class="font-semibold mb-2">‚úàÔ∏è Distance de voyage</h4>
      <div class="grid grid-cols-2 gap-2"><button class="btn-secondary distance-btn" data-distance="proche">üöó Proche (Europe)</button> <button class="btn-secondary distance-btn" data-distance="lointain">üõ´ Lointain (Monde)</button>
      </div>
     </div>
    </div>
    <div class="flex gap-2"><button class="btn-primary flex-1" onclick="generateDestination()" id="generate-destination-btn"> üé≤ G√©n√©rer ma destination surprise </button> <button class="btn-secondary" onclick="closeDestinationModal()"> Annuler </button>
    </div><!-- Zone de r√©sultat -->
    <div id="destination-result" class="hidden mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-center">
     <h4 class="font-semibold text-yellow-800 mb-2">üéâ Votre destination surprise :</h4>
     <p id="generated-destination" class="text-lg font-bold text-gray-800 mb-3"></p>
     <div class="flex gap-2 justify-center"><button class="btn-primary text-sm" onclick="useGeneratedDestination()">Utiliser cette destination</button> <button class="btn-secondary text-sm" onclick="regenerateDestination()">G√©n√©rer une autre</button>
     </div>
    </div>
   </div>
  </div><!-- Success Modal -->
  <div id="success-modal" class="modal">
   <div class="modal-content">
    <div class="emoji-large">
     üéâ
    </div>
    <h3 class="text-2xl font-bold text-gray-800 mb-4">F√©licitations !</h3>
    <p class="text-gray-600 mb-6">Votre profil &amp;SWAPP a √©t√© cr√©√© avec succ√®s !</p>
    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
     <h4 class="font-semibold text-green-800 mb-2">üéØ Prochaines √©tapes :</h4>
     <ul class="text-sm text-green-700 space-y-1">
      <li>üì∏ Ajout de vos photos (logement + profil)</li>
      <li>‚úÖ Validation de votre profil par notre √©quipe</li>
      <li>üîç Recherche de matches compatibles</li>
      <li>üí¨ Premiers contacts avec vos swappers potentiels</li>
     </ul>
    </div><button class="btn-primary" onclick="closeModal()"> Parfait ! </button>
   </div>
  </div>
  <script>
        let currentStep = 1;
        let selectedExchangeStyle = null;
        let selectedTravelWith = null;
        let selectedStayStyle = null;
        let selectedTravelerType = null;
        let dateRangeCount = 1;
        let selectedMood = null;
        let selectedRegion = null;
        let selectedDistance = null;

        // Base de donn√©es des destinations par r√©gion et mood
        const destinations = {
            europe: {
                city: ['Paris (France)', 'Bruxelles (Belgique)', 'Luxembourg (Luxembourg)', 'Madrid (Espagne)', 'Barcelone (Espagne)', 'Lisbonne (Portugal)', 'Berlin (Allemagne)'],
                sea: ['Barcelone (Espagne)', 'Lisbonne (Portugal)', 'Tarragone (Espagne)'],
                mountain: ['Ski (Norv√®ge)', 'Copenhague (Danemark)']
            },
            americas: {
                city: ['New York (√âtats-Unis)', 'Boston (√âtats-Unis)', 'Chicago (√âtats-Unis)', 'Los Angeles (√âtats-Unis)', 'Montr√©al (Canada)', 'Toronto (Canada)', 'Mexico City (Mexique)', 'S√£o Paulo (Br√©sil)', 'Rio de Janeiro (Br√©sil)'],
                sea: ['Miami (√âtats-Unis)', 'Playa del Carmen (Mexique)', 'Rio de Janeiro (Br√©sil)', 'Santo Domingo (R√©publique Dominicaine)'],
                mountain: ['Seattle (√âtats-Unis)', 'Belo Horizonte (Br√©sil)']
            },
            'asia-oceania': {
                city: ['Singapour (Singapour)', 'Sydney (Australie)', 'Mumbai (Inde)', 'Chandigarh (Inde)'],
                sea: ['Sydney (Australie)', 'Singapour (Singapour)'],
                mountain: ['Chandigarh (Inde)']
            },
            africa: {
                city: ['Libreville (Gabon)', 'Accra (Ghana)'],
                sea: ['Libreville (Gabon)', 'Accra (Ghana)'],
                mountain: ['Accra (Ghana)']
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            setupEventListeners();
            setupCharacterCounters();
        });

        function setupEventListeners() {
            // Selection cards
            document.addEventListener('click', function(e) {
                const card = e.target.closest('.selection-card');
                if (card) {
                    if (card.getAttribute('data-exchange-style')) {
                        document.querySelectorAll('[data-exchange-style]').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        selectedExchangeStyle = card.getAttribute('data-exchange-style');
                        clearError('exchange-style');
                        
                        // G√©rer l'affichage des dates de disponibilit√©
                        const availabilitySection = document.getElementById('availability-section');
                        if (selectedExchangeStyle === 'delayed' || selectedExchangeStyle === 'both') {
                            availabilitySection.classList.remove('hidden');
                            // Rendre les champs requis
                            document.getElementById('availability-start').required = true;
                            document.getElementById('availability-end').required = true;
                        } else {
                            availabilitySection.classList.add('hidden');
                            // Retirer l'obligation
                            document.getElementById('availability-start').required = false;
                            document.getElementById('availability-end').required = false;
                        }
                    }
                    
                    if (card.getAttribute('data-travel-with')) {
                        document.querySelectorAll('[data-travel-with]').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        selectedTravelWith = card.getAttribute('data-travel-with');
                        clearError('travel-with');
                        
                        // G√©rer les champs conditionnels
                        document.getElementById('colocation-details').classList.add('hidden');
                        document.getElementById('other-travel-details').classList.add('hidden');
                        
                        if (selectedTravelWith === 'colocation') {
                            document.getElementById('colocation-details').classList.remove('hidden');
                        } else if (selectedTravelWith === 'other') {
                            document.getElementById('other-travel-details').classList.remove('hidden');
                        }
                    }

                    if (card.getAttribute('data-stay-style')) {
                        document.querySelectorAll('[data-stay-style]').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        selectedStayStyle = card.getAttribute('data-stay-style');
                    }

                    if (card.getAttribute('data-traveler-type')) {
                        // Permettre la s√©lection multiple pour les types de voyageur
                        if (card.classList.contains('traveler-type-card')) {
                            card.classList.toggle('selected');
                            // Pas de variable selectedTravelerType unique, on g√®re un array
                        } else {
                            document.querySelectorAll('[data-traveler-type]').forEach(c => c.classList.remove('selected'));
                            card.classList.add('selected');
                            selectedTravelerType = card.getAttribute('data-traveler-type');
                        }
                    }
                }
            });

            // Flexible options
            document.addEventListener('change', function(e) {
                if (e.target.classList.contains('flexible-checkbox')) {
                    const option = e.target.closest('.flexible-option');
                    const inputDiv = option.querySelector('div[id$="-input"]');
                    
                    if (e.target.checked) {
                        option.classList.add('selected');
                        inputDiv.classList.remove('hidden');
                    } else {
                        option.classList.remove('selected');
                        inputDiv.classList.add('hidden');
                    }
                }
            });

            // Pet details
            document.addEventListener('change', function(e) {
                if (e.target.name === 'has-pet') {
                    document.getElementById('pet-details').classList.toggle('hidden', e.target.value !== 'yes');
                    clearError('has-pet');
                }
            });

            // Reason checkboxes (max 2)
            document.addEventListener('change', function(e) {
                if (e.target.classList.contains('reason-checkbox')) {
                    const checked = document.querySelectorAll('.reason-checkbox:checked');
                    if (checked.length > 2) {
                        e.target.checked = false;
                        showNotification('Vous pouvez s√©lectionner maximum 2 raisons', 'error');
                    }
                }
            });

            // Clear errors on input
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('input-field') || e.target.classList.contains('textarea-field')) {
                    clearError(e.target.id);
                }
            });

            document.addEventListener('change', function(e) {
                if (e.target.name === 'has-pet') {
                    clearError('has-pet');
                }
            });
        }

        function setupCharacterCounters() {
            const fieldsWithCounters = [
                { field: 'housing-description', counter: 'housing-description-count', max: 500 },
                { field: 'ideal-swapper-description', counter: 'ideal-swapper-count', max: 300 },
                { field: 'experience-title', counter: 'experience-title-count', max: 100 },
                { field: 'experience-description', counter: 'experience-description-count', max: 800 },
                { field: 'personal-presentation', counter: 'personal-presentation-count', max: 400 }
            ];

            fieldsWithCounters.forEach(({ field, counter, max }) => {
                const fieldElement = document.getElementById(field);
                const counterElement = document.getElementById(counter);
                
                if (fieldElement && counterElement) {
                    fieldElement.addEventListener('input', function() {
                        const length = this.value.length;
                        counterElement.textContent = `${length}/${max} caract√®res`;
                        
                        counterElement.classList.remove('warning', 'error');
                        if (length > max * 0.9) {
                            counterElement.classList.add('warning');
                        }
                        if (length > max) {
                            counterElement.classList.add('error');
                        }
                    });
                }
            });
        }

        // Modal Functions
        function openHousingAIModal() {
            document.getElementById('housing-ai-modal').classList.add('show');
        }

        function closeHousingAIModal() {
            document.getElementById('housing-ai-modal').classList.remove('show');
            document.getElementById('housing-ai-result').classList.add('hidden');
        }

        function openSwapperAIModal() {
            document.getElementById('swapper-ai-modal').classList.add('show');
        }

        function closeSwapperAIModal() {
            document.getElementById('swapper-ai-modal').classList.remove('show');
            document.getElementById('swapper-ai-result').classList.add('hidden');
        }

        async function generateSwapperProfileFromModal() {
            const btn = document.getElementById('modal-swapper-generate-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const age = document.getElementById('modal-swapper-age').value;
                const style = document.getElementById('modal-swapper-style').value;
                const profession = document.getElementById('modal-swapper-profession').value;
                const interests = document.getElementById('modal-swapper-interests').value;
                const quality = document.getElementById('modal-swapper-quality').value;
                const other = document.getElementById('modal-swapper-other').value;
                
                let ageText = '';
                switch(age) {
                    case 'jeune': ageText = 'jeune personne dynamique'; break;
                    case 'adulte': ageText = 'personne exp√©riment√©e'; break;
                    case 'senior': ageText = 'personne mature et sage'; break;
                    case 'similaire': ageText = 'personne d\'√¢ge similaire au mien'; break;
                    default: ageText = 'personne';
                }
                
                let styleText = '';
                switch(style) {
                    case 'calme': styleText = 'calme et respectueuse'; break;
                    case 'sociable': styleText = 'sociable et ouverte aux √©changes'; break;
                    case 'independant': styleText = 'ind√©pendante et discr√®te'; break;
                    case 'culturel': styleText = 'passionn√©e de culture'; break;
                    case 'aventurier': styleText = '√† l\'esprit aventurier'; break;
                    default: styleText = 'bienveillante';
                }
                
                let professionText = '';
                switch(profession) {
                    case 'etudiant': professionText = ', id√©alement √©tudiant(e)'; break;
                    case 'professionnel': professionText = ', jeune professionnel(le) de pr√©f√©rence'; break;
                    case 'cadre': professionText = ', cadre exp√©riment√©(e)'; break;
                    case 'freelance': professionText = ', freelance ou ind√©pendant(e)'; break;
                    case 'retraite': professionText = ', retrait√©(e) actif(ve)'; break;
                    default: professionText = '';
                }
                
                let interestsText = '';
                switch(interests) {
                    case 'culture': interestsText = ' Amateur de culture et de mus√©es'; break;
                    case 'gastronomie': interestsText = ' Passionn√©(e) de gastronomie locale'; break;
                    case 'nature': interestsText = ' Amoureux(se) de nature et de randonn√©e'; break;
                    case 'art': interestsText = ' Sensible √† l\'art et √† la cr√©ativit√©'; break;
                    case 'sport': interestsText = ' Sportif(ve) et actif(ve)'; break;
                    case 'histoire': interestsText = ' Passionn√©(e) d\'histoire et de patrimoine'; break;
                    default: interestsText = '';
                }
                
                let qualityText = '';
                switch(quality) {
                    case 'respectueux': qualityText = ', qui saura respecter mon logement'; break;
                    case 'propre': qualityText = ', soigneux(se) et propre'; break;
                    case 'communicatif': qualityText = ', bon(ne) communicant(e)'; break;
                    case 'flexible': qualityText = ', flexible et adaptable'; break;
                    case 'responsable': qualityText = ', responsable et fiable'; break;
                    default: qualityText = '';
                }
                
                let otherText = other ? `. ${other}` : '';
                
                const suggestion = `Je recherche une ${ageText} ${styleText}${professionText}${qualityText}.${interestsText}, qui partage l'esprit du voyage authentique et des √©changes enrichissants${otherText}.`;
                
                document.getElementById('swapper-ai-generated-text').textContent = suggestion;
                document.getElementById('swapper-ai-result').classList.remove('hidden');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function useGeneratedSwapperProfile() {
            const generatedText = document.getElementById('swapper-ai-generated-text').textContent;
            document.getElementById('ideal-swapper-description').value = generatedText;
            document.getElementById('ideal-swapper-description').dispatchEvent(new Event('input'));
            closeSwapperAIModal();
            showNotification('Description appliqu√©e ! Vous pouvez la modifier si besoin.', 'success');
        }

        function regenerateSwapperProfile() {
            generateSwapperProfileFromModal();
        }

        function openTitleAIModal() {
            document.getElementById('title-ai-modal').classList.add('show');
        }

        function closeTitleAIModal() {
            document.getElementById('title-ai-modal').classList.remove('show');
        }

        function openDescriptionAIModal() {
            document.getElementById('description-ai-modal').classList.add('show');
        }

        function closeDescriptionAIModal() {
            document.getElementById('description-ai-modal').classList.remove('show');
        }

        function openPresentationAIModal() {
            document.getElementById('presentation-ai-modal').classList.add('show');
        }

        function closePresentationAIModal() {
            document.getElementById('presentation-ai-modal').classList.remove('show');
        }

        // AI Generation Functions
        async function generateHousingDescriptionFromModal() {
            const btn = document.getElementById('modal-housing-generate-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const city = document.getElementById('city').value || 'ma ville';
                const housingType = document.getElementById('housing-type').value;
                const ambiance = document.getElementById('modal-housing-ambiance').value;
                const strength = document.getElementById('modal-housing-strength').value;
                const neighborhood = document.getElementById('modal-housing-neighborhood').value;
                const special = document.getElementById('modal-housing-special').value;
                const unique = document.getElementById('modal-housing-unique').value;
                const activities = document.getElementById('modal-housing-activities').value;
                
                let typeText = '';
                switch(housingType) {
                    case 'apartment': typeText = 'appartement'; break;
                    case 'house': typeText = 'maison'; break;
                    case 'room': typeText = 'chambre'; break;
                    case 'shared': typeText = 'colocation'; break;
                    default: typeText = 'logement';
                }
                
                let ambianceText = '';
                switch(ambiance) {
                    case 'moderne': ambianceText = 'moderne et √©pur√©'; break;
                    case 'cosy': ambianceText = 'cosy et chaleureux'; break;
                    case 'lumineux': ambianceText = 'lumineux et spacieux'; break;
                    case 'authentique': ambianceText = 'authentique plein de charme'; break;
                    case 'design': ambianceText = 'design et contemporain'; break;
                    default: ambianceText = 'confortable';
                }
                
                let strengthText = '';
                switch(strength) {
                    case 'vue': strengthText = 'avec une belle vue'; break;
                    case 'localisation': strengthText = 'id√©alement situ√©'; break;
                    case 'calme': strengthText = 'dans un environnement tr√®s calme'; break;
                    case 'transport': strengthText = 'proche de tous les transports'; break;
                    case 'espace': strengthText = 'offrant beaucoup d\'espace'; break;
                    case 'terrasse': strengthText = 'avec terrasse/balcon'; break;
                    default: strengthText = 'parfaitement √©quip√©';
                }
                
                let neighborhoodText = '';
                switch(neighborhood) {
                    case 'centre': neighborhoodText = 'au c≈ìur du centre-ville anim√©'; break;
                    case 'residentiel': neighborhoodText = 'dans un quartier r√©sidentiel calme'; break;
                    case 'branche': neighborhoodText = 'dans un quartier branch√© et culturel'; break;
                    case 'authentique': neighborhoodText = 'dans un quartier authentique et local'; break;
                    case 'nature': neighborhoodText = 'proche de la nature'; break;
                    default: neighborhoodText = 'dans un excellent quartier';
                }
                
                let specialText = special ? ` Bonus : ${special} !` : '';
                let uniqueText = unique ? ` ${unique}.` : '';
                let activitiesText = activities ? ` √Ä proximit√© : ${activities}.` : '';
                
                const suggestion = `${typeText.charAt(0).toUpperCase() + typeText.slice(1)} ${ambianceText} ${strengthText} ${neighborhoodText} de ${city}.${uniqueText} Parfait pour d√©couvrir la ville tout en profitant d'un cadre de vie exceptionnel !${specialText}${activitiesText}`;
                
                document.getElementById('housing-ai-generated-text').textContent = suggestion;
                document.getElementById('housing-ai-result').classList.remove('hidden');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function useGeneratedHousingDescription() {
            const generatedText = document.getElementById('housing-ai-generated-text').textContent;
            document.getElementById('housing-description').value = generatedText;
            document.getElementById('housing-description').dispatchEvent(new Event('input'));
            closeHousingAIModal();
            showNotification('Description appliqu√©e ! Vous pouvez la modifier si besoin.', 'success');
        }

        function regenerateHousingDescription() {
            generateHousingDescriptionFromModal();
        }

        async function generateHousingDescriptionWithInputs() {
            const btn = document.getElementById('housing-ai-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const city = document.getElementById('city').value || 'ma ville';
                const housingType = document.getElementById('housing-type').value;
                const ambiance = document.getElementById('housing-ambiance').value;
                const strength = document.getElementById('housing-strength').value;
                const neighborhood = document.getElementById('housing-neighborhood').value;
                const special = document.getElementById('housing-special').value;
                
                let typeText = '';
                switch(housingType) {
                    case 'apartment': typeText = 'appartement'; break;
                    case 'house': typeText = 'maison'; break;
                    case 'room': typeText = 'chambre'; break;
                    case 'shared': typeText = 'colocation'; break;
                    default: typeText = 'logement';
                }
                
                let ambianceText = '';
                switch(ambiance) {
                    case 'moderne': ambianceText = 'moderne et √©pur√©'; break;
                    case 'cosy': ambianceText = 'cosy et chaleureux'; break;
                    case 'lumineux': ambianceText = 'lumineux et spacieux'; break;
                    case 'authentique': ambianceText = 'authentique plein de charme'; break;
                    case 'design': ambianceText = 'design et contemporain'; break;
                    default: ambianceText = 'confortable';
                }
                
                let strengthText = '';
                switch(strength) {
                    case 'vue': strengthText = 'avec une belle vue'; break;
                    case 'localisation': strengthText = 'id√©alement situ√©'; break;
                    case 'calme': strengthText = 'dans un environnement tr√®s calme'; break;
                    case 'transport': strengthText = 'proche de tous les transports'; break;
                    case 'espace': strengthText = 'offrant beaucoup d\'espace'; break;
                    case 'terrasse': strengthText = 'avec terrasse/balcon'; break;
                    default: strengthText = 'parfaitement √©quip√©';
                }
                
                let neighborhoodText = '';
                switch(neighborhood) {
                    case 'centre': neighborhoodText = 'au c≈ìur du centre-ville anim√©'; break;
                    case 'residentiel': neighborhoodText = 'dans un quartier r√©sidentiel calme'; break;
                    case 'branche': neighborhoodText = 'dans un quartier branch√© et culturel'; break;
                    case 'authentique': neighborhoodText = 'dans un quartier authentique et local'; break;
                    case 'nature': neighborhoodText = 'proche de la nature'; break;
                    default: neighborhoodText = 'dans un excellent quartier';
                }
                
                let specialText = special ? ` Bonus : ${special} !` : '';
                
                const suggestion = `${typeText.charAt(0).toUpperCase() + typeText.slice(1)} ${ambianceText} ${strengthText} ${neighborhoodText} de ${city}. Parfait pour d√©couvrir la ville tout en profitant d'un cadre de vie exceptionnel !${specialText}`;
                
                document.getElementById('housing-ai-text').textContent = suggestion;
                document.getElementById('housing-ai-suggestion').classList.add('show');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function showHousingExamples() {
            document.getElementById('housing-examples-modal').classList.add('show');
        }

        function closeHousingExamples() {
            document.getElementById('housing-examples-modal').classList.remove('show');
        }

        function copyExample(text) {
            document.getElementById('housing-description').value = text.replace(/"/g, '');
            document.getElementById('housing-description').dispatchEvent(new Event('input'));
            closeHousingExamples();
            showNotification('Exemple copi√© ! Vous pouvez le modifier √† votre guise.', 'success');
        }

        function showAvailableCities() {
            document.getElementById('available-cities').classList.remove('hidden');
        }

        function hideAvailableCities() {
            document.getElementById('available-cities').classList.add('hidden');
        }

        function selectCity(cityName) {
            document.getElementById('main-destination').value = cityName;
            hideAvailableCities();
            showNotification(`Destination s√©lectionn√©e : ${cityName}`, 'success');
        }

        async function generateIdealSwapperProfile() {
            const btn = document.getElementById('swapper-ai-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const suggestions = [
                    "Personne respectueuse et soigneuse, qui saura prendre soin de mon logement comme du sien. Id√©alement quelqu'un de curieux et ouvert, qui appr√©cie les √©changes culturels authentiques.",
                    "Swapper calme et responsable, amateur de d√©couvertes locales. Je recherche quelqu'un qui partage l'esprit du voyage slow et qui respecte l'environnement de vie.",
                    "Personne bienveillante et communicative, qui aime partager ses exp√©riences de voyage. Id√©al si vous √™tes passionn√© par la culture locale et les rencontres humaines."
                ];
                
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                document.getElementById('swapper-ai-text').textContent = randomSuggestion;
                document.getElementById('swapper-ai-suggestion').classList.add('show');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function generateExperienceTitle() {
            const btn = document.getElementById('title-ai-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const city = document.getElementById('city').value || 'Ma ville';
                const destination = document.getElementById('main-destination').value || 'Destination de r√™ve';
                
                const suggestions = [
                    `√âchange ${city} ‚Üî ${destination} - D√©couverte authentique`,
                    `${city} vers ${destination} - Aventure culturelle`,
                    `Swap ${city}/${destination} - Immersion locale`,
                    `√âchange de logements ${city} - ${destination} - Voyage unique`
                ];
                
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                document.getElementById('title-ai-text').textContent = randomSuggestion;
                document.getElementById('title-ai-suggestion').classList.add('show');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function generateExperienceDescription() {
            const btn = document.getElementById('description-ai-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const destination = document.getElementById('main-destination').value || 'cette magnifique destination';
                const city = document.getElementById('city').value || 'ma ville';
                
                const suggestions = [
                    `Passionn√©(e) de voyages authentiques, je r√™ve de d√©couvrir ${destination} en vivant comme un local ! En √©change, je vous ouvre les portes de ${city} et partage mes bonnes adresses. Recherche un √©change bas√© sur la confiance mutuelle et l'envie de cr√©er des souvenirs inoubliables.`,
                    `Apr√®s avoir explor√© de nombreux pays, ${destination} reste sur ma liste de r√™ve ! Je propose un √©change chaleureux o√π chacun d√©couvre une nouvelle culture. Mon logement √† ${city} vous attend pour une exp√©rience immersive. √âchange id√©al pour les amoureux de d√©couvertes authentiques.`,
                    `Envie de m'√©vader et de d√©couvrir ${destination} sous un angle diff√©rent ! Je cherche un √©change convivial avec quelqu'un qui partage la m√™me passion du voyage. En retour, je vous fais d√©couvrir les tr√©sors cach√©s de ${city}. Parfait pour une aventure humaine enrichissante !`
                ];
                
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                document.getElementById('description-ai-text').textContent = randomSuggestion;
                document.getElementById('description-ai-suggestion').classList.add('show');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function generatePersonalPresentation() {
            const btn = document.getElementById('presentation-ai-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const age = document.getElementById('age').value;
                const city = document.getElementById('city').value || 'ma ville';
                
                const suggestions = [
                    `Curieux(se) de nature et passionn√©(e) de d√©couvertes, j'aime explorer de nouveaux horizons tout en partageant des moments authentiques. Bas√©(e) √† ${city}, je jongle entre travail et aventures. Toujours pr√™t(e) √† √©changer sur les cultures, la gastronomie et les bons plans voyage !`,
                    `Amateur(trice) de voyages et de rencontres humaines, je crois que les plus belles exp√©riences naissent des √©changes spontan√©s. Quand je ne voyage pas, j'explore les tr√©sors de ${city}. J'adore partager mes d√©couvertes et apprendre des autres !`,
                    `Esprit ouvert et bienveillant, je vois chaque voyage comme une opportunit√© d'enrichissement mutuel. Install√©(e) √† ${city}, je cultive l'art de vivre local tout en gardant l'√¢me d'un(e) explorateur(trice). H√¢te de d√©couvrir votre univers !`
                ];
                
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                document.getElementById('presentation-ai-text').textContent = randomSuggestion;
                document.getElementById('presentation-ai-suggestion').classList.add('show');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function generateDestinationSuggestion() {
            const btn = document.getElementById('destination-ai-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<span class="loading-spinner"></span> G√©n√©ration...';
            btn.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const city = document.getElementById('city').value || 'votre ville';
                const country = document.getElementById('country').value;
                
                // Suggestions bas√©es sur des destinations populaires &SWAPP
                const suggestions = [
                    'Barcelone (Espagne)',
                    'Lisbonne (Portugal)', 
                    'Berlin (Allemagne)',
                    'Rome (Italie)',
                    'Amsterdam (Pays-Bas)',
                    'Copenhague (Danemark)',
                    'Prague (R√©publique tch√®que)',
                    'Vienne (Autriche)',
                    'Budapest (Hongrie)',
                    'Stockholm (Su√®de)',
                    'New York (√âtats-Unis)',
                    'Montr√©al (Canada)',
                    'Tokyo (Japon)',
                    'Sydney (Australie)',
                    'Singapour (Singapour)'
                ];
                
                // √âviter de sugg√©rer le m√™me pays si possible
                let filteredSuggestions = suggestions;
                if (country) {
                    const countryNames = {
                        'FR': 'France', 'ES': 'Espagne', 'IT': 'Italie', 'DE': 'Allemagne',
                        'PT': 'Portugal', 'NL': 'Pays-Bas', 'DK': 'Danemark', 'CZ': 'R√©publique tch√®que',
                        'AT': 'Autriche', 'HU': 'Hongrie', 'SE': 'Su√®de', 'US': '√âtats-Unis',
                        'CA': 'Canada', 'JP': 'Japon', 'AU': 'Australie', 'SG': 'Singapour'
                    };
                    const currentCountryName = countryNames[country];
                    if (currentCountryName) {
                        filteredSuggestions = suggestions.filter(dest => !dest.includes(currentCountryName));
                    }
                }
                
                const randomSuggestion = filteredSuggestions[Math.floor(Math.random() * filteredSuggestions.length)];
                
                document.getElementById('destination-ai-text').textContent = randomSuggestion;
                document.getElementById('destination-ai-suggestion').classList.add('show');
                
            } catch (error) {
                showNotification('Erreur lors de la g√©n√©ration. Veuillez r√©essayer.', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function useAISuggestion(fieldId, textId) {
            const field = document.getElementById(fieldId);
            const text = document.getElementById(textId).textContent;
            
            field.value = text;
            field.dispatchEvent(new Event('input')); // Trigger character counter update
            
            // Hide suggestion
            const suggestionId = textId.replace('-text', '-suggestion');
            hideAISuggestion(suggestionId);
            
            showNotification('Suggestion appliqu√©e ! Vous pouvez la modifier si besoin.', 'success');
        }

        function hideAISuggestion(suggestionId) {
            document.getElementById(suggestionId).classList.remove('show');
        }

        function validateAndNext(step) {
            console.log(`Validation de l'√©tape ${step}`);
            
            // Validation temporairement d√©sactiv√©e pour faciliter la navigation
            nextStep();
            
            // Code de validation original (temporairement comment√©)
            /*
            if (validateStep(step)) {
                console.log(`√âtape ${step} valid√©e, passage √† l'√©tape suivante`);
                nextStep();
            } else {
                console.log(`√âtape ${step} non valid√©e`);
                showNotification('Veuillez remplir tous les champs obligatoires', 'error');
            }
            */
        }

        function validateStep(step) {
            let isValid = true;
            
            switch(step) {
                case 1:
                    isValid = validateField('country') && isValid;
                    isValid = validateField('city') && isValid;
                    isValid = validateField('region') && isValid;
                    isValid = validateField('postal-code') && isValid;
                    isValid = validateField('bedrooms') && isValid;
                    isValid = validateField('sleeping-spots') && isValid;
                    isValid = validateField('housing-type') && isValid;
                    isValid = validateField('surface') && isValid;
                    isValid = validateField('housing-description') && isValid;
                    
                    // Valider les dates de disponibilit√© seulement si n√©cessaires
                    if (selectedExchangeStyle === 'delayed' || selectedExchangeStyle === 'both') {
                        isValid = validateField('availability-start') && isValid;
                        isValid = validateField('availability-end') && isValid;
                        
                        // V√©rifier que la date de fin de disponibilit√© est apr√®s la date de d√©but
                        const availabilityStart = document.getElementById('availability-start').value;
                        const availabilityEnd = document.getElementById('availability-end').value;
                        if (availabilityStart && availabilityEnd && new Date(availabilityEnd) <= new Date(availabilityStart)) {
                            showError('availability', 'La date de fin doit √™tre apr√®s la date de d√©but');
                            isValid = false;
                        }
                    }
                    break;
                    
                case 2:
                    if (!selectedExchangeStyle) {
                        showError('exchange-style', 'Veuillez s√©lectionner un style d\'√©change');
                        isValid = false;
                    }
                    if (!selectedTravelWith) {
                        showError('travel-with', 'Veuillez s√©lectionner avec qui vous voyagez');
                        isValid = false;
                    }
                    const hasPet = document.querySelector('input[name="has-pet"]:checked');
                    if (!hasPet) {
                        showError('has-pet', 'Veuillez indiquer si vous avez un animal');
                        isValid = false;
                    }
                    break;
                    
                case 3:
                    isValid = validateField('main-destination') && isValid;
                    isValid = validateField('experience-title') && isValid;
                    isValid = validateField('experience-description') && isValid;
                    isValid = validateField('date-start') && isValid;
                    isValid = validateField('date-end') && isValid;
                    
                    // V√©rifier que la date de fin est apr√®s la date de d√©but
                    const startDate = document.getElementById('date-start').value;
                    const endDate = document.getElementById('date-end').value;
                    if (startDate && endDate && new Date(endDate) <= new Date(startDate)) {
                        showError('dates', 'La date de retour doit √™tre apr√®s la date de d√©part');
                        isValid = false;
                    }
                    break;
                    
                case 4:
                    isValid = validateField('first-name') && isValid;
                    isValid = validateField('last-name') && isValid;
                    isValid = validateEmailField('email') && isValid;
                    isValid = validateAgeField('age') && isValid;
                    break;
            }
            
            return isValid;
        }

        function validateField(fieldId) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();
            
            if (!value) {
                showError(fieldId, `Ce champ est obligatoire`);
                return false;
            }
            
            clearError(fieldId);
            return true;
        }

        function validateEmailField(fieldId) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();
            
            if (!value) {
                showError(fieldId, 'L\'email est obligatoire');
                return false;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(value)) {
                showError(fieldId, 'Veuillez saisir un email valide');
                return false;
            }
            
            clearError(fieldId);
            return true;
        }

        function validateAgeField(fieldId) {
            const field = document.getElementById(fieldId);
            const value = parseInt(field.value);
            
            if (!field.value.trim()) {
                showError(fieldId, 'L\'√¢ge est obligatoire');
                return false;
            }
            
            if (isNaN(value) || value < 18 || value > 99) {
                showError(fieldId, 'Veuillez saisir un √¢ge valide (18-99 ans)');
                return false;
            }
            
            clearError(fieldId);
            return true;
        }

        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const errorDiv = document.getElementById(fieldId + '-error');
            
            if (field) {
                field.classList.add('error');
            }
            
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.classList.add('show');
            }
        }

        function clearError(fieldId) {
            const field = document.getElementById(fieldId);
            const errorDiv = document.getElementById(fieldId + '-error');
            
            if (field) {
                field.classList.remove('error');
            }
            
            if (errorDiv) {
                errorDiv.classList.remove('show');
            }
        }

        function nextStep() {
            if (currentStep < 4) {
                document.getElementById(`step-${currentStep}`).classList.add('hidden');
                currentStep++;
                document.getElementById(`step-${currentStep}`).classList.remove('hidden');
                updateProgress();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function goToStep(step) {
            if (step >= 1 && step <= 4) {
                document.getElementById(`step-${currentStep}`).classList.add('hidden');
                currentStep = step;
                document.getElementById(`step-${currentStep}`).classList.remove('hidden');
                updateProgress();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updateProgress() {
            const progress = (currentStep / 4) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('current-step').textContent = currentStep;
        }

        function validateAndComplete() {
            // Validation temporairement d√©sactiv√©e
            const formData = collectAllFormData();
            console.log('Profil complet cr√©√©:', formData);
            showNotification('Profil cr√©√© avec succ√®s !', 'success');
            document.getElementById('success-modal').classList.add('show');
            
            // Code de validation original (temporairement comment√©)
            /*
            if (validateStep(4)) {
                const formData = collectAllFormData();
                console.log('Profil complet cr√©√©:', formData);
                showNotification('Profil cr√©√© avec succ√®s !', 'success');
                document.getElementById('success-modal').classList.add('show');
            } else {
                showNotification('Veuillez remplir tous les champs obligatoires', 'error');
            }
            */
        }

        function closeModal() {
            document.getElementById('success-modal').classList.remove('show');
        }

        // Fonctions pour la destination surprise
        function openDestinationModal() {
            document.getElementById('destination-modal').classList.add('show');
            selectedMood = null;
            selectedRegion = null;
            // Reset selections
            document.querySelectorAll('.mood-btn, .region-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        function closeDestinationModal() {
            document.getElementById('destination-modal').classList.remove('show');
        }

        // Gestion des s√©lections dans le modal
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('mood-btn')) {
                document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
                e.target.classList.add('selected');
                selectedMood = e.target.getAttribute('data-mood');
            }
            
            if (e.target.classList.contains('region-btn')) {
                document.querySelectorAll('.region-btn').forEach(btn => btn.classList.remove('selected'));
                e.target.classList.add('selected');
                selectedRegion = e.target.getAttribute('data-region');
            }
        });

        function generateDestination() {
            if (!selectedMood || !selectedRegion) {
                showNotification('Veuillez s√©lectionner un mood et une r√©gion', 'error');
                return;
            }

            const regionDestinations = destinations[selectedRegion];
            const moodDestinations = regionDestinations[selectedMood];
            
            if (!moodDestinations || moodDestinations.length === 0) {
                showNotification('Aucune destination trouv√©e pour cette combinaison', 'error');
                return;
            }

            const randomDestination = moodDestinations[Math.floor(Math.random() * moodDestinations.length)];
            document.getElementById('main-destination').value = randomDestination;
            
            closeDestinationModal();
            showNotification(`Destination g√©n√©r√©e : ${randomDestination} !`, 'success');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transition-all duration-300`;
            
            const styles = {
                success: 'bg-green-500 text-white',
                error: 'bg-red-500 text-white',
                info: 'bg-blue-500 text-white'
            };
            
            notification.className += ` ${styles[type] || styles.info}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 4000);
        }

        function addDateRange() {
            dateRangeCount++;
            const dateRangesDiv = document.getElementById('date-ranges');
            const newRange = document.createElement('div');
            newRange.className = 'date-range bg-gray-50 border border-gray-200 rounded-lg p-4 mt-3';
            newRange.innerHTML = `
                <button type="button" class="remove-date-btn" onclick="removeDateRange(this)" title="Supprimer cette plage">
                    ‚úï
                </button>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Date de d√©part</label>
                        <input type="date" class="input-field date-start">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Date de retour</label>
                        <input type="date" class="input-field date-end">
                    </div>
                </div>
            `;
            dateRangesDiv.appendChild(newRange);
        }

        function addAvailabilityRange() {
            const availabilityRangesDiv = document.getElementById('availability-ranges');
            const newRange = document.createElement('div');
            newRange.className = 'date-range bg-gray-50 border border-gray-200 rounded-lg p-4 mt-3';
            newRange.innerHTML = `
                <button type="button" class="remove-date-btn" onclick="removeAvailabilityRange(this)" title="Supprimer cette p√©riode">
                    ‚úï
                </button>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Du</label>
                        <input type="date" class="input-field availability-start">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">Au</label>
                        <input type="date" class="input-field availability-end">
                    </div>
                </div>
            `;
            availabilityRangesDiv.appendChild(newRange);
        }

        function removeDateRange(button) {
            const dateRange = button.closest('.date-range');
            if (document.querySelectorAll('#date-ranges .date-range').length > 1) {
                dateRange.remove();
            } else {
                showNotification('Vous devez garder au moins une plage de dates', 'warning');
            }
        }

        function removeAvailabilityRange(button) {
            const dateRange = button.closest('.date-range');
            if (document.querySelectorAll('#availability-ranges .date-range').length > 1) {
                dateRange.remove();
            } else {
                showNotification('Vous devez garder au moins une p√©riode de disponibilit√©', 'warning');
            }
        }

        function collectAllFormData() {
            const data = {
                // Timestamp
                timestamp: new Date().toISOString(),
                
                // === √âTAPE 1 - APPARTEMENT ===
                country: document.getElementById('country').value,
                region: document.getElementById('region').value,
                city: document.getElementById('city').value,
                postalCode: document.getElementById('postal-code').value,
                bedrooms: document.getElementById('bedrooms').value,
                sleepingSpots: document.getElementById('sleeping-spots').value,
                surface: document.getElementById('surface').value,
                housingType: document.getElementById('housing-type').value,
                housingDescription: document.getElementById('housing-description').value,
                
                // √âquipements
                equipment: Array.from(document.querySelectorAll('.equipment-checkbox:checked')).map(cb => cb.value),
                otherEquipment: document.getElementById('other-equipment')?.value || '',
                
                // Obligations
                obligations: Array.from(document.querySelectorAll('.obligation-checkbox:checked')).map(cb => cb.value),
                otherObligations: document.getElementById('other-obligations')?.value || '',
                
                // Dates de disponibilit√©
                availabilityRanges: Array.from(document.querySelectorAll('#availability-ranges .date-range')).map(range => ({
                    start: range.querySelector('.availability-start').value,
                    end: range.querySelector('.availability-end').value
                })).filter(range => range.start && range.end),
                
                // === √âTAPE 2 - STYLE D'√âCHANGE ===
                exchangeStyle: selectedExchangeStyle,
                travelWith: selectedTravelWith,
                colocationNumber: document.getElementById('colocation-number')?.value || '',
                otherTravelDescription: document.getElementById('other-travel-description')?.value || '',
                
                // Animaux
                hasPet: document.querySelector('input[name="has-pet"]:checked')?.value,
                petType: document.getElementById('pet-type')?.value || '',
                petDescription: document.getElementById('pet-description')?.value || '',
                travelWithPet: document.querySelector('input[name="travel-with-pet"]:checked')?.value,
                
                // Profil swapper id√©al
                idealSwapperDescription: document.getElementById('ideal-swapper-description')?.value || '',
                agePreferences: Array.from(document.querySelectorAll('.age-preference:checked')).map(cb => cb.value),
                
                // Flexibilit√© recherch√©e
                flexibility: Array.from(document.querySelectorAll('.flexibility-checkbox:checked')).map(cb => cb.value),
                
                // === √âTAPE 3 - EXP√âRIENCE ===
                mainDestination: document.getElementById('main-destination').value,
                flexibleDuration: document.getElementById('flexible-duration')?.value || '',
                flexiblePeriod: document.getElementById('flexible-period')?.value || '',
                experienceTitle: document.getElementById('experience-title').value,
                experienceDescription: document.getElementById('experience-description').value,
                
                // Dates de voyage
                dateRanges: Array.from(document.querySelectorAll('#date-ranges .date-range')).map(range => ({
                    start: range.querySelector('.date-start').value,
                    end: range.querySelector('.date-end').value
                })).filter(range => range.start && range.end),
                
                // Options flexibles
                flexibleOptions: {
                    region: document.querySelector('[data-flexible-type="region"] .flexible-checkbox:checked') ? 
                           document.querySelector('[data-flexible-type="region"] #region-input input')?.value : null,
                    cities: document.querySelector('[data-flexible-type="cities"] .flexible-checkbox:checked') ? 
                           Array.from(document.querySelectorAll('[data-flexible-type="cities"] #cities-input input')).map(input => input.value).filter(v => v.trim()) : [],
                    destinationType: document.querySelector('[data-flexible-type="destination-type"] .flexible-checkbox:checked') ? 
                                   document.querySelector('[data-flexible-type="destination-type"] #destination-type-input input')?.value : null
                },
                
                // === √âTAPE 4 - PROFIL PERSONNEL ===
                firstName: document.getElementById('first-name').value,
                lastName: document.getElementById('last-name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone')?.value || '',
                age: document.getElementById('age').value,
                vieCompany: document.getElementById('vie-company')?.value || '',
                personalPresentation: document.getElementById('personal-presentation')?.value || '',
                
                // Motivations et style
                reasons: Array.from(document.querySelectorAll('.reason-checkbox:checked')).map(cb => cb.value),
                otherReason: document.getElementById('other-reason')?.value || '',
                stayStyle: selectedStayStyle,
                
                // Infos personnelles
                smoker: document.querySelector('input[name="smoker"]:checked')?.value,
                remoteWork: document.querySelector('input[name="remote-work"]:checked')?.value
            };

            console.log('Donn√©es collect√©es:', data);
            return data;
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'995b52eaf2b073b1',t:'MTc2MTY2Mzg0OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
